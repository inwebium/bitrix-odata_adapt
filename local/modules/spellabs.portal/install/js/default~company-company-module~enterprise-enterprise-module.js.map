{"version":3,"sources":["webpack:///./src/app/constants/content-types.ts","webpack:///./src/app/services/banners/banners.service.ts","webpack:///./src/app/services/photo-library/photo-library.service.ts","webpack:///./src/app/services/videos/videos.service.ts"],"names":[],"mappings":"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","file":"default~company-company-module~enterprise-enterprise-module.js","sourcesContent":["export const contentTypes = {\n  album: 'Контентный тип альбома изображений',\n  photo: 'Контентный тип фото'\n};\n","import { Injectable } from '@angular/core';\nimport { ICachingOptions } from '@pnp/odata';\nimport * as moment from 'moment';\n\nimport { Banner } from './banner';\nimport { ListItemsService } from '../list-items-service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BannersService extends ListItemsService<Banner>  {\n\n  getListRelativePath(): string {\n    return '';\n  }\n\n  getListTitle(): string {\n    return 'Баннеры';\n  }\n\n  getSelect(): string {\n    return 'Id,Title,slText,slUrl,slShow,slIndex,AttachmentFiles/ServerRelativeUrl';\n  }\n\n  getExpand(): string {\n    return 'AttachmentFiles';\n  }\n\n  getOrderBy(): [string, boolean][] {\n    return [['slIndex', true], ['Created', false]];\n  }\n\n  getTop(): number {\n    return 5;\n  }\n\n  getCachingOptions(): ICachingOptions {\n    return {\n      expiration: moment().add(30, 'minutes').toDate(),\n      key: this.getListTitle(),\n      storeName: 'session'\n    };\n  }\n\n  convertListItemToEntity(item: any): Banner {\n    const banner: Banner = {\n      id: item.Id,\n      title: item.Title,\n      imageUrl: item.AttachmentFiles && item.AttachmentFiles.length > 0 ? item.AttachmentFiles[0].ServerRelativeUrl : null,\n      isShow: item.slShow,\n      url: item.slUrl,\n      text: item.slText\n    };\n    return banner;\n  }\n\n  convertEntityToListItem(entity: Banner) {\n    throw new Error('Method not implemented.');\n  }\n\n  getMockItems(): Banner[] {\n    return [];\n  }\n\n  isMock(): boolean {\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ICachingOptions } from '@pnp/odata';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { Web } from '@pnp/sp';\nimport { flatMap, map } from 'rxjs/operators';\nimport * as moment from 'moment';\n\nimport { SharepointService } from '../sharepoint/sharepoint.service';\nimport { ListItemsService } from '../list-items-service';\nimport { PhotoLibrary } from './photo-library';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PhotoLibraryService extends ListItemsService<PhotoLibrary>  {\n\n  constructor(private http: HttpClient,\n    private sharepointService: SharepointService) {\n    super();\n  }\n\n  getCachingOptions(): ICachingOptions {\n    return {\n      expiration: moment().add(30, 'minutes').toDate(),\n      key: this.getListTitle(),\n      storeName: 'session'\n    };\n  }\n\n  getListTitle(): string {\n    return 'Библиотека фотогалереи';\n  }\n\n  getListRelativePath(): string {\n    return 'slPhotoLibrary';\n  }\n\n  getSelect(): string {\n    return 'Id,Title,slAlbumCover,slAlbumDescription,slAlbumIndex,slPhotoIndex,File/ServerRelativeUrl,ContentType,ContentTypeId,Created';\n  }\n\n  getExpand(): string {\n    return 'File';\n  }\n\n  getOrderBy(): [string, boolean][] {\n    return [['Created', false]];\n  }\n\n  getTop(): number {\n    return 15;\n  }\n\n  convertListItemToEntity(item: any): PhotoLibrary {\n    const entity: PhotoLibrary = {\n      id: item.Id,\n      title: item.Title,\n      albumCover: item.slAlbumCover,\n      albumDescription: item.slAlbumDescription,\n      albumIndex: item.slAlbumIndex,\n      photoIndex: item.slPhotoIndex,\n      url: item.File && item.File.ServerRelativeUrl\n    };\n    return entity;\n  }\n\n  convertEntityToListItem(entity: PhotoLibrary) {\n    throw new Error('Method not implemented.');\n  }\n\n  getMockItems(): PhotoLibrary[] {\n    return [];\n  }\n\n  isMock(): boolean {\n    return false;\n  }\n\n  getFiles(id: number, webId?: string): Observable<PhotoLibrary[]> {\n    return this.getWebById(webId).pipe(\n        map((web: Web) => web.lists.getByTitle(this.getListTitle()).items.getById(id).folder.files.toUrlAndQuery()),\n        // flatMap((url: string) => this.http.get(`${this.sharepointService.getRelativeUrl()}/${url}?$expand=ListItemAllFields`)),\n        flatMap((url: string) => url.indexOf('://') > 0 ? this.http.get(`${url}?$expand=ListItemAllFields`)\n          : this.http.get(`${this.sharepointService.getRelativeUrl()}/${url}?$expand=ListItemAllFields`)),\n        map((item: any) => item.value.map(i => {\n          const entity = this.convertListItemToEntity(i.ListItemAllFields);\n          entity.url = i.ServerRelativeUrl;\n          return entity;\n        })));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ICachingOptions } from '@pnp/odata';\nimport * as moment from 'moment';\n\nimport { Video } from './video';\nimport { ListItemsService } from '../list-items-service';\nimport { SharepointService } from '../sharepoint/sharepoint.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VideosService extends ListItemsService<Video> {\n\n  getListTitle(): string {\n    return 'Ссылки на видео';\n  }\n\n  getListRelativePath(): string {\n    return 'lists/slVideo';\n  }\n\n  getSelect(): string {\n    return 'Id,Title,slVideoUrl,slIsIFrame,Created';\n  }\n\n  getExpand(): string {\n    return null;\n  }\n\n  getOrderBy(): [string, boolean][] {\n    return [['Created', false]];\n  }\n\n  getTop(): number {\n    return 5000;\n  }\n\n  getCachingOptions(): ICachingOptions {\n    return {\n      expiration: moment().add(30, 'minutes').toDate(),\n      key: this.getListTitle(),\n      storeName: 'session'\n    };\n  }\n\n  convertListItemToEntity(item: any): Video {\n    const entity: Video = {\n      id: item.Id,\n      title: item.Title,\n      isIFrame: item.slIsIFrame,\n      videoUrl: item.slVideoUrl,\n      created: new Date(item.Created),\n      createdTitle: moment(item.Created).fromNow()\n    };\n    return entity;\n  }\n\n  convertEntityToListItem(entity: Video) {\n    throw new Error('Method not implemented.');\n  }\n\n  getMockItems(): Video[] {\n    return [];\n  }\n\n  isMock(): boolean {\n    return false;\n  }\n\n}\n"],"sourceRoot":""}