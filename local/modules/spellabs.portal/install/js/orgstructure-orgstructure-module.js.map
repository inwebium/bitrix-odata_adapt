{"version":3,"sources":["webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.html","webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.scss","webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.ts","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.html","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.scss","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.ts","webpack:///./src/app/orgstructure/orgstructure-routing.module.ts","webpack:///./src/app/orgstructure/orgstructure.module.ts","webpack:///./src/app/services/trees/trees.service.ts"],"names":[],"mappings":"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","file":"orgstructure-orgstructure-module.js","sourcesContent":["module.exports = \"<div class=\\\"l-page-header\\\">\\n  <div class=\\\"l-breadcrumbs\\\">\\n    <div class=\\\"l-breadcrumb\\\"><a [routerLink]=\\\"['/company']\\\">Главная</a></div>\\n    <div class=\\\"l-breadcrumb\\\">Структура компании</div>\\n  </div>\\n  <div class=\\\"title\\\">Структура компании</div>\\n</div>\\n<div class=\\\"l-page\\\">\\n  <div class=\\\"l-page-inner\\\">\\n    <div class=\\\"l-page__content\\\">\\n      <div class=\\\"l-orgstructure\\\">\\n        <div class=\\\"l-orgstructure__inner\\\">\\n          <app-orgstructure-tree\\n            [trees]=\\\"trees\\\"\\n          ></app-orgstructure-tree>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \".l-orgstructure {\\n  text-align: center;\\n  background-color: #fff;\\n  padding: 25px;\\n  box-sizing: border-box; }\\n\\n.l-orgstructure__inner {\\n  max-width: 1530px; }\\n\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { TreesService, TreeNode } from 'src/app/services/trees/trees.service';\nimport { Department } from 'src/app/staff/services/departments/department';\n\n@Component({\n  selector: 'app-orgstructure-page',\n  templateUrl: './orgstructure-page.component.html',\n  styleUrls: ['./orgstructure-page.component.scss']\n})\nexport class OrgstructurePageComponent implements OnInit {\n  public trees: TreeNode<Department>[] = [];\n  public departmentId: number = null;\n\n  constructor(\n    private route: ActivatedRoute,\n    private treesService: TreesService\n  ) {}\n\n  ngOnInit() {\n    this.trees = this.treesService.getTreeOfArray(\n      this.route.snapshot.data.departments,\n      null\n    );\n  }\n}\n","module.exports = \"<div class=\\\"list\\\">\\n  <div\\n    class=\\\"item\\\"\\n    [id]=\\\"'js-child-structure-' + item.value.id\\\"\\n    *ngFor=\\\"let item of trees\\\"\\n    [ngClass]=\\\"{'is-expanded' : item.isExpanded === true, 'is-hidden' : item.isExpanded === false}\\\"\\n    #structureItem\\n  >\\n    <div class=\\\"parent\\\">\\n      <div class=\\\"title\\\" (click)=\\\"toggleItemTree(structureItem, item)\\\">\\n        <div class=\\\"text\\\">\\n          <span appNgslDotdotdot>{{ item.value.title }}</span>\\n        </div>\\n      </div>\\n      <div class=\\\"leader\\\">\\n        <div class=\\\"inner\\\">\\n          <div class=\\\"photo\\\">\\n            <app-user-thumb\\n              [photo]=\\\"item.value.lookupManagerPhoto\\\"\\n              [route]=\\\"item.value.profileManagerRoute\\\"\\n              [active]=\\\"\\n                item.value.lookupManagerReason == null ||\\n                item.value.lookupManagerReason === ''\\n              \\\"\\n            ></app-user-thumb>\\n          </div>\\n          <div class=\\\"info\\\">\\n            <div\\n              class=\\\"full-name\\\"\\n              [routerLink]=\\\"item.value.profileManagerRoute\\\"\\n            >\\n              {{ item.value.lookupManagerFullName }}\\n            </div>\\n            <div class=\\\"position\\\">{{ item.value.lookupManagerPosition }}</div>\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"structure\\\">\\n        <div class=\\\"m-department-structure\\\">\\n          <a\\n            class=\\\"employees\\\"\\n            *ngIf=\\\"item.value.employeeCount\\\"\\n            #employeesRef\\n            [state]=\\\"{ department: true }\\\"\\n            [routerLink]=\\\"['/phonebook/department', item.value.id]\\\"\\n          >\\n            <div class=\\\"text\\\">\\n              {{ item.value.totalEmployeeCount }}\\n              {{ units(item.value.totalEmployeeCount, casesEmployee) }}\\n            </div>\\n          </a>\\n          <a\\n            *ngIf=\\\"item.childrens && item.childrens.length > 0\\\"\\n            class=\\\"divisions\\\"\\n            (click)=\\\"toggleItemTree(structureItem, item)\\\"\\n          >\\n            {{ item.childrens.length }}\\n            {{ units(item.childrens.length, casesDivisions) }}\\n          </a>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"child\\\" *ngIf=\\\"item.childrens\\\" #child>\\n      <app-orgstructure-tree\\n        #recurciveElement\\n        [trees]=\\\"item.childrens\\\"\\n      ></app-orgstructure-tree>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.list {\\n  text-align: center; }\\n\\n.item {\\n  margin: 15px 7px;\\n  display: inline-block;\\n  text-align: center;\\n  vertical-align: top; }\\n\\n.item.is-hidden {\\n    display: none; }\\n\\n.item.is-hidden.is-expanded {\\n      display: inline-block; }\\n\\n.item .parent {\\n    display: inline-block;\\n    position: relative;\\n    height: auto;\\n    text-align: left;\\n    box-sizing: border-box;\\n    width: 360px; }\\n\\n@media screen and (max-width: 1440px) {\\n      .item .parent {\\n        width: 330px; } }\\n\\n.item .parent .title {\\n      cursor: pointer;\\n      display: table;\\n      table-layout: fixed;\\n      width: 100%;\\n      border-collapse: collapse;\\n      box-sizing: border-box;\\n      text-align: center;\\n      height: 48px;\\n      background-color: #768692;\\n      color: #ffffff; }\\n\\n.item .parent .title .text {\\n        box-sizing: border-box;\\n        padding: 0 15px;\\n        display: table-cell;\\n        vertical-align: middle;\\n        height: 72px; }\\n\\n.item .parent .title .text span {\\n          display: inline-block;\\n          font-weight: bold;\\n          font-size: 18px;\\n          line-height: 24px;\\n          max-height: 72px; }\\n\\n.item .parent .leader {\\n      padding: 12px;\\n      height: 96px;\\n      background-color: #f1f1f4;\\n      box-sizing: border-box; }\\n\\n.item .parent .leader .inner {\\n        display: table;\\n        table-layout: fixed;\\n        width: 100%;\\n        border-collapse: collapse; }\\n\\n.item .parent .leader .inner .photo,\\n        .item .parent .leader .inner .info {\\n          display: table-cell;\\n          vertical-align: middle;\\n          box-sizing: border-box;\\n          width: auto; }\\n\\n.item .parent .leader .inner .photo {\\n          width: 60px;\\n          text-align: center; }\\n\\n.item .parent .leader .inner .info {\\n          padding-left: 10px; }\\n\\n.item .parent .leader .inner .info .full-name {\\n            font-size: 14px;\\n            color: #eb113b;\\n            cursor: pointer;\\n            display: -webkit-box;\\n            display: block;\\n            text-overflow: ellipsis;\\n            -webkit-line-clamp: 2;\\n            overflow: hidden;\\n            max-height: 38px; }\\n\\n.item .parent .leader .inner .info .full-name + .position {\\n              margin-top: 5px; }\\n\\n.item .parent .leader .inner .info .position {\\n            color: #050505;\\n            font-size: 10px;\\n            line-height: 12px;\\n            display: -webkit-box;\\n            -webkit-line-clamp: 1;\\n            overflow: hidden; }\\n\\n.item .parent .structure {\\n      padding: 0;\\n      box-sizing: border-box;\\n      line-height: 32px;\\n      text-align: center;\\n      width: 100%;\\n      -ms-flex-line-pack: center;\\n          align-content: center;\\n      font-size: 0;\\n      margin-top: -16px; }\\n\\n.item .parent .structure .employees,\\n      .item .parent .structure .divisions {\\n        display: inline-block;\\n        padding: 0px 10px;\\n        font-size: 14px;\\n        color: #ffffff;\\n        text-decoration: none;\\n        max-width: 148px;\\n        min-width: 40%; }\\n\\n.item .parent .structure .employees {\\n        background-color: #a2b2c8;\\n        position: relative;\\n        cursor: pointer; }\\n\\n.item .parent .structure .employees.is-expanded .list-employees {\\n          display: block; }\\n\\n.item .parent .structure .employees .list-employees {\\n          display: none;\\n          position: absolute;\\n          top: 40px;\\n          left: 0;\\n          padding: 10px 5px;\\n          padding-top: 15px;\\n          box-sizing: border-box;\\n          background-color: #d5dde6;\\n          width: 240px;\\n          z-index: 10; }\\n\\n.item .parent .structure .employees .list-employees input[type='button'] {\\n            padding: 0;\\n            margin: 0;\\n            border: 0;\\n            min-width: 0;\\n            background-color: transparent;\\n            cursor: pointer;\\n            width: 30px;\\n            height: 30px;\\n            border-radius: 100%;\\n            position: absolute;\\n            top: -10px;\\n            right: -10px;\\n            z-index: 15;\\n            background-color: #a2b2c8;\\n            box-shadow: 0 0px 0px 2px #d5dde6;\\n            background-repeat: no-repeat;\\n            background-position: center;\\n            background-size: 100%;\\n            background-image: url(\\\"/assets/icons/icon-close-white.svg\\\"); }\\n\\n.item .parent .structure .employees .list-employees input[type='button']:focus {\\n              outline: none; }\\n\\n.item .parent .structure .employees .list-employees .list {\\n            max-height: 200px;\\n            overflow-y: auto; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee {\\n              display: table;\\n              table-layout: fixed;\\n              border-collapse: collapse;\\n              width: 100%; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee + .item-employee {\\n                margin-top: 5px; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .photo,\\n              .item .parent .structure .employees .list-employees .list .item-employee .full-name {\\n                display: table-cell;\\n                vertical-align: middle;\\n                box-sizing: border-box;\\n                width: auto; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .photo {\\n                width: 50px;\\n                text-align: center; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .full-name {\\n                padding-left: 10px;\\n                text-align: left;\\n                line-height: 16px;\\n                font-size: 14px; }\\n\\n.item .parent .structure .divisions {\\n        background-color: #d5dde6;\\n        color: #050505;\\n        cursor: pointer; }\\n\\n.child {\\n  display: none;\\n  margin-top: 15px; }\\n\\n.child .item.is-expanded > .parent > .title {\\n    background-color: #768692 !important;\\n    color: #fff !important; }\\n\\n.is-expanded > .child {\\n    display: block;\\n    text-align: left; }\\n\\n.is-expanded > .child .parent > .title {\\n      height: 96px;\\n      background-color: #f1f1f4;\\n      color: #000; }\\n\\n.is-expanded > .child .parent > .title span {\\n        display: -webkit-box;\\n        display: block;\\n        text-overflow: ellipsis;\\n        -webkit-line-clamp: 3;\\n        overflow: hidden;\\n        max-height: 72px; }\\n\\n.is-expanded > .child .parent > .leader {\\n      background-color: #d5dde6; }\\n\\n.is-expanded > .child .parent > .structure .divisions {\\n      background-color: #f1f1f4; }\\n\"","import {\n  Component,\n  OnInit,\n  Input,\n  ViewChildren,\n  ElementRef,\n  QueryList,\n  AfterViewInit,\n  ViewChild,\n  HostListener,\n  Inject\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Router, NavigationEnd } from '@angular/router';\n\nimport { TreeNode } from 'src/app/services/trees/trees.service';\nimport { Department } from 'src/app/staff/services/departments/department';\nimport { EmployeesFactory } from 'src/app/staff/services/employees/employees.factory';\nimport { IListItemsPage } from 'src/app/services/list-items-service';\nimport { Employee } from 'src/app/staff/services/employees/employee';\nimport { Observable, of } from 'rxjs';\n\nexport interface Cases {\n  nom: string;\n  gen: string;\n  plu: string;\n}\n\n@Component({\n  selector: 'app-orgstructure-tree',\n  templateUrl: './orgstructure-tree.component.html',\n  styleUrls: ['./orgstructure-tree.component.scss']\n})\nexport class OrgstructureTreeComponent implements AfterViewInit, OnInit {\n  @ViewChildren('structureItem', { read: ElementRef })\n  structureItems: QueryList<ElementRef>;\n  @ViewChild('list') list: ElementRef;\n  @ViewChild('child') child: ElementRef;\n  @ViewChild('employeesRef') employeesRef: ElementRef;\n\n  @ViewChildren('recurciveElement', { read: OrgstructureTreeComponent })\n  treeElements: QueryList<OrgstructureTreeComponent>;\n\n  parentElement: OrgstructureTreeComponent = null;\n\n  casesEmployee: Cases = {\n    nom: 'сотрудник',\n    gen: 'сотрудника',\n    plu: 'сотрудников'\n  };\n\n  casesDivisions: Cases = {\n    nom: 'подразделение',\n    gen: 'подразделения',\n    plu: 'подразделений'\n  };\n\n  @Input() trees: TreeNode<Department>[] = [];\n  @Input() isRoot: boolean = false;\n\n  employees: Employee[] = [];\n\n  constructor(\n    @Inject('EmployeesFactory') private employeesFactory: EmployeesFactory,\n    @Inject(DOCUMENT) private document: Document,\n    private element: ElementRef\n  ) {}\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    this.treeElements.forEach(element => {\n      element.parentElement = this;\n    });\n  }\n\n  public toggleItemTree(structureItem: HTMLElement, item) {\n    if (item.childrens.length) {\n      const barHeight = document.getElementById('suiteBarDelta').clientHeight;\n      const ribbonHeight = document.getElementById('s4-ribbonrow').clientHeight;\n      const offsetTop = document.getElementById('s4-workspace').scrollTop - (barHeight + ribbonHeight) - 15;\n      structureItem.classList.toggle('is-expanded');\n      this.structureItems.toArray().forEach(element => {\n        element.nativeElement.classList.toggle('is-hidden');\n      });\n      this.treeElements.toArray().forEach(element => {\n        element.structureItems.toArray().forEach(e => {\n          if (e.nativeElement.classList.contains('is-hidden')) {\n            e.nativeElement.classList.toggle('is-hidden');\n          }\n          if (e.nativeElement.classList.contains('is-expanded')) {\n            e.nativeElement.classList.toggle('is-expanded');\n          }\n        });\n        element.treeElements.toArray().forEach(e => {\n          this.hideItemTree(e);\n        });\n      });\n      if (\n        structureItem.classList.contains('is-expanded') &&\n        item.childrens.length\n      ) {\n        const element = document.getElementById('js-child-structure-' + item.value.id);\n        document.getElementById('s4-workspace').scrollTop = element.getBoundingClientRect().top + offsetTop;\n      } else if ( !structureItem.classList.contains('is-expanded') && item.value.parentDepartmentId) {\n        const element = document.getElementById('js-child-structure-' + item.value.parentDepartmentId);\n        document.getElementById('s4-workspace').scrollTop = element.getBoundingClientRect().top + offsetTop;\n      }\n    }\n  }\n\n  public units(num: number, cases: Cases): string {\n    num = Math.abs(num);\n    let word = '';\n    if (num.toString().indexOf('.') > -1) {\n      word = cases.gen;\n    } else {\n      word =\n        num % 10 === 1 && num % 100 !== 11\n          ? cases.nom\n          : num % 10 >= 2 &&\n            num % 10 <= 4 &&\n            (num % 100 < 10 || num % 100 >= 20)\n          ? cases.gen\n          : cases.plu;\n    }\n    return word;\n  }\n\n  private hideItemTree(item: OrgstructureTreeComponent) {\n    item.structureItems.toArray().forEach(element => {\n      if (!element.nativeElement.classList.contains('is-hidden')) {\n        element.nativeElement.classList.toggle('is-hidden');\n      }\n      if (element.nativeElement.classList.contains('is-expanded')) {\n        element.nativeElement.classList.toggle('is-expanded');\n      }\n    });\n    item.treeElements.forEach(element => {\n      this.hideItemTree(element);\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OrgstructurePageComponent } from './components/orgstructure-page/orgstructure-page.component';\nimport { DepartmentsResolver } from '../phonebook/services/departments/departments.resolver';\n// import { MsalGuard } from '@azure/msal-angular';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrgstructurePageComponent,\n    resolve: { departments: DepartmentsResolver },\n    // canActivate : [MsalGuard],\n    data: { animation: 'fadeAnimation', title: 'Оргструктура' }\n  }\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    providers: [DepartmentsResolver],\n    exports: [RouterModule]\n})\nexport class OrgstructureRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\n\nimport { SharedModule } from '../shared/shared.module';\n\nimport { OrgstructurePageComponent } from './components/orgstructure-page/orgstructure-page.component';\nimport { OrgstructureTreeComponent } from './components/orgstructure-tree/orgstructure-tree.component';\nimport { OrgstructureRoutingModule } from './orgstructure-routing.module';\nimport { StaffModule } from '../staff/staff.module';\n\n@NgModule({\n  declarations: [\n    OrgstructurePageComponent,\n    OrgstructureTreeComponent,\n  ],\n  imports: [\n    StaffModule,\n    RouterModule,\n    CommonModule,\n    OrgstructureRoutingModule,\n    SharedModule,\n    FormsModule\n  ]\n})\nexport class OrgstructureModule { }\n","import { Injectable } from '@angular/core';\n\nexport interface TreeNodeValue {\n  id: number;\n  title: string;\n  parentId?: number;\n}\n\nexport interface TreeNode<T extends TreeNodeValue> {\n  isExpanded?: boolean;\n  value: T;\n  childrens: TreeNode<T>[];\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TreesService {\n\n  constructor() { }\n\n  private lastParentId: number = null;\n\n  public getTreeOfArray<T extends TreeNodeValue>(items: T[], departmentId): TreeNode<T>[] {\n    const nodes: TreeNode<T>[] = [];\n    const map = {};\n    const roots: TreeNode<T>[] = [];\n    for (let i = 0; i < items.length; i += 1) {\n      const node: TreeNode<T> = { value: items[i], childrens: [] };\n      map[node.value.id] = i;\n      if (departmentId !== null) {\n        node.isExpanded = node.value.id === Number(departmentId) ? true : false;\n      }\n      nodes.push(node);\n    }\n    if (departmentId !== null) {\n      this.expandNodes(nodes, Number(departmentId));\n    }\n    for (let i = 0; i < nodes.length; i += 1) {\n      const node = nodes[i];\n      if (node.value.parentId != null) {\n        nodes[map[node.value.parentId]].childrens.push(node);\n      } else {\n        roots.push(node);\n      }\n    }\n    return roots;\n  }\n\n  private expandNodes(nodes, id: number) {\n    const node = nodes.filter(n => n.value.id === id)[0];\n    this.lastParentId = id;\n    if (node) {\n      node.isExpanded = true;\n      this.lastParentId = node.value.parentId;\n      this.expandNodes(nodes, node.value.parentId);\n    }\n  }\n}\n"],"sourceRoot":""}