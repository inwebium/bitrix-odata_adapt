{"version":3,"sources":["webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.html","webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.scss","webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.ts","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.html","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.scss","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.ts","webpack:///./src/app/orgstructure/orgstructure-routing.module.ts","webpack:///./src/app/orgstructure/orgstructure.module.ts","webpack:///./src/app/services/trees/trees.service.ts"],"names":[],"mappings":"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","file":"orgstructure-orgstructure-module.js","sourcesContent":["module.exports = \"<div class=\\\"l-page-header\\\">\\n  <div class=\\\"l-breadcrumbs\\\">\\n    <div class=\\\"l-breadcrumb\\\"><a [routerLink]=\\\"['/company']\\\">Главная</a></div>\\n    <div class=\\\"l-breadcrumb\\\">Структура компании</div>\\n  </div>\\n  <div class=\\\"title\\\">Структура компании</div>\\n</div>\\n<div class=\\\"l-page\\\">\\n  <div class=\\\"l-page-inner\\\">\\n    <div class=\\\"l-page__content\\\">\\n      <div class=\\\"l-orgstructure\\\">\\n        <div class=\\\"l-orgstructure__inner\\\">\\n          <app-orgstructure-tree [trees]=\\\"trees\\\"></app-orgstructure-tree>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \".l-orgstructure {\\n  text-align: center;\\n  background-color: #fff;\\n  padding: 25px;\\n  box-sizing: border-box; }\\n\\n.l-orgstructure__inner {\\n  display: inline-block;\\n  max-width: 1350px; }\\n\"","import {\n  Component, OnInit\n} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { SidebarService } from 'src/app/services/sidebar/sidebar.service';\nimport { TreesService, TreeNode } from 'src/app/services/trees/trees.service';\nimport { Department } from 'src/app/staff/services/departments/department';\n\n@Component({\n  selector: 'app-orgstructure-page',\n  templateUrl: './orgstructure-page.component.html',\n  styleUrls: ['./orgstructure-page.component.scss']\n})\nexport class OrgstructurePageComponent implements OnInit {\n\n  public showSidebar: Boolean = false;\n\n  public trees: TreeNode<Department>[] = [];\n\n  constructor(private sidebarService: SidebarService, private route: ActivatedRoute, private treesService: TreesService) {\n    this.sidebarService.handleSetSettings({showSidebar: false, bgColor: '#fff'});\n  }\n\n  ngOnInit() {\n    this.trees\n      = this.treesService.getTreeOfArray(this.route.snapshot.data.departments);\n  }\n}\n","module.exports = \"<div class=\\\"item\\\" *ngFor=\\\"let item of trees\\\" #structureItem>\\n  <div class=\\\"parent\\\">\\n    <div class=\\\"title\\\" (click)=\\\"toggleItemTree(structureItem, item.value)\\\">\\n      <div class=\\\"text\\\">\\n        <span>{{ item.value.title }}</span>\\n      </div>\\n    </div>\\n    <div class=\\\"leader\\\">\\n      <div class=\\\"inner\\\">\\n        <div class=\\\"photo\\\">\\n          <app-user-thumb [photo]=\\\"item.value.lookupManagerPhoto\\\"\\n          [route]=\\\"item.value.profileManagerRoute\\\"\\n          [active]=\\\"item.value.lookupManagerReason == null || item.value.lookupManagerReason === ''\\\"></app-user-thumb>\\n        </div>\\n        <div class=\\\"info\\\">\\n          <div class=\\\"full-name\\\">{{ item.value.lookupManagerFullName }}</div>\\n          <div class=\\\"position\\\">{{ item.value.lookupManagerPosition }}</div>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"structure\\\">\\n      <div class=\\\"m-department-structure\\\">\\n        <a class=\\\"employees\\\" *ngIf=\\\"item.value.employeeCount\\\" #employeesRef (click)=\\\"toggleEmployees($event, employeesRef, item.value)\\\">\\n          <div class=\\\"text\\\">\\n            {{ item.value.totalEmployeeCount }} {{ units(item.value.totalEmployeeCount, casesEmployee) }}\\n          </div>\\n          <div class=\\\"list-employees\\\" #list (click)=\\\"$event.stopPropagation()\\\">\\n            <input type=\\\"button\\\" (click)=\\\"toggleEmployees($event, employeesRef, item.value)\\\" />\\n            <div class=\\\"list\\\">\\n              <div class=\\\"item-employee\\\" *ngFor=\\\"let employee of employees\\\">\\n                <div class=\\\"photo\\\">\\n                  <app-user-thumb [width]=\\\"'35px'\\\" [height]=\\\"'35px'\\\"\\n                  [photo]=\\\"employee.photo\\\" [route]=\\\"employee.profileRoute\\\"\\n                  [active]=\\\"employee.reason == null || employee.reason === ''\\\"></app-user-thumb>\\n                </div>\\n                <div class=\\\"full-name\\\">{{ employee.fullName }}</div>\\n              </div>\\n            </div>\\n          </div>\\n        </a>\\n        <a *ngIf=\\\"item.childrens && item.childrens.length > 0\\\" class=\\\"divisions\\\" (click)=\\\"toggleItemTree(structureItem, item.value)\\\">\\n          {{ item.childrens.length }} {{ units(item.childrens.length, casesDivisions) }}\\n        </a>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"child\\\" *ngIf=\\\"item.childrens\\\">\\n    <app-orgstructure-tree #recurciveElement [trees]=\\\"item.childrens\\\"></app-orgstructure-tree>\\n  </div>\\n</div>\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.item {\\n  vertical-align: top;\\n  display: inline-block;\\n  margin: 15px 7px; }\\n\\n.item.is-hidden {\\n    display: none; }\\n\\n.item.is-hidden.is-expanded {\\n      display: inline-block; }\\n\\n.item .parent {\\n    display: inline-block;\\n    position: relative;\\n    width: 295px;\\n    height: auto;\\n    text-align: left;\\n    box-sizing: border-box; }\\n\\n.item .parent .title {\\n      cursor: pointer;\\n      display: table;\\n      table-layout: fixed;\\n      width: 100%;\\n      border-collapse: collapse;\\n      box-sizing: border-box;\\n      text-align: center;\\n      height: 48px;\\n      background-color: #768692;\\n      color: #FFFFFF; }\\n\\n.item .parent .title .text {\\n        box-sizing: border-box;\\n        padding: 0 15px;\\n        display: table-cell;\\n        vertical-align: middle;\\n        height: 72px; }\\n\\n.item .parent .title .text span {\\n          display: inline-block;\\n          display: -webkit-box;\\n          display: block;\\n          text-overflow: ellipsis;\\n          -webkit-line-clamp: 1;\\n          overflow: hidden;\\n          max-height: 24px;\\n          font-weight: 400;\\n          font-size: 18px; }\\n\\n.item .parent .leader {\\n      padding: 12px;\\n      height: 96px;\\n      background-color: #F1F1F4;\\n      box-sizing: border-box; }\\n\\n.item .parent .leader .inner {\\n        display: table;\\n        table-layout: fixed;\\n        width: 100%;\\n        border-collapse: collapse; }\\n\\n.item .parent .leader .inner .photo,\\n        .item .parent .leader .inner .info {\\n          display: table-cell;\\n          vertical-align: middle;\\n          box-sizing: border-box;\\n          width: auto; }\\n\\n.item .parent .leader .inner .photo {\\n          width: 60px;\\n          text-align: center; }\\n\\n.item .parent .leader .inner .info {\\n          padding-left: 10px; }\\n\\n.item .parent .leader .inner .info .full-name {\\n            font-size: 14px;\\n            color: #EB113B;\\n            display: -webkit-box;\\n            display: block;\\n            text-overflow: ellipsis;\\n            -webkit-line-clamp: 2;\\n            overflow: hidden;\\n            max-height: 38px; }\\n\\n.item .parent .leader .inner .info .full-name + .position {\\n              margin-top: 5px; }\\n\\n.item .parent .leader .inner .info .position {\\n            color: #050505;\\n            font-size: 10px;\\n            line-height: 12px;\\n            display: -webkit-box;\\n            -webkit-line-clamp: 1;\\n            overflow: hidden; }\\n\\n.item .parent .structure {\\n      padding: 0px 15px;\\n      box-sizing: border-box;\\n      line-height: 32px;\\n      text-align: center;\\n      width: 100%;\\n      -ms-flex-line-pack: center;\\n          align-content: center;\\n      font-size: 0;\\n      margin-top: -16px; }\\n\\n.item .parent .structure .employees,\\n      .item .parent .structure .divisions {\\n        display: inline-block;\\n        padding: 0px 10px;\\n        font-size: 14px;\\n        color: #FFFFFF;\\n        text-decoration: none;\\n        max-width: 148px;\\n        min-width: 40%; }\\n\\n.item .parent .structure .employees {\\n        background-color: #A2B2C8;\\n        position: relative;\\n        cursor: pointer; }\\n\\n.item .parent .structure .employees.is-expanded .list-employees {\\n          display: block; }\\n\\n.item .parent .structure .employees .list-employees {\\n          display: none;\\n          position: absolute;\\n          top: 40px;\\n          left: 0;\\n          padding: 10px 5px;\\n          padding-top: 15px;\\n          box-sizing: border-box;\\n          background-color: #d5dde6;\\n          width: 240px;\\n          z-index: 10; }\\n\\n.item .parent .structure .employees .list-employees input[type=\\\"button\\\"] {\\n            padding: 0;\\n            margin: 0;\\n            border: 0;\\n            min-width: 0;\\n            background-color: transparent;\\n            cursor: pointer;\\n            width: 30px;\\n            height: 30px;\\n            border-radius: 100%;\\n            position: absolute;\\n            top: -10px;\\n            right: -10px;\\n            z-index: 15;\\n            background-color: #a2b2c8;\\n            box-shadow: 0 0px 0px 2px #D5DDE6;\\n            background-repeat: no-repeat;\\n            background-position: center;\\n            background-size: 100%;\\n            background-image: url(\\\"/assets/icons/icon-close-white.svg\\\"); }\\n\\n.item .parent .structure .employees .list-employees input[type=\\\"button\\\"]:focus {\\n              outline: none; }\\n\\n.item .parent .structure .employees .list-employees .list {\\n            max-height: 200px;\\n            overflow-y: auto; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee {\\n              display: table;\\n              table-layout: fixed;\\n              border-collapse: collapse;\\n              width: 100%; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee + .item-employee {\\n                margin-top: 5px; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .photo,\\n              .item .parent .structure .employees .list-employees .list .item-employee .full-name {\\n                display: table-cell;\\n                vertical-align: middle;\\n                box-sizing: border-box;\\n                width: auto; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .photo {\\n                width: 50px;\\n                text-align: center; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .full-name {\\n                padding-left: 10px;\\n                text-align: left;\\n                line-height: 16px;\\n                font-size: 14px; }\\n\\n.item .parent .structure .divisions {\\n        background-color: #D5DDE6;\\n        color: #050505;\\n        cursor: pointer; }\\n\\n.child {\\n  display: none;\\n  margin-top: 15px; }\\n\\n.is-expanded > .child {\\n    display: block; }\\n\\n.is-expanded > .child .parent > .title {\\n      height: 96px;\\n      background-color: #F1F1F4;\\n      color: #000; }\\n\\n.is-expanded > .child .parent > .title span {\\n        display: -webkit-box;\\n        display: block;\\n        text-overflow: ellipsis;\\n        -webkit-line-clamp: 3;\\n        overflow: hidden;\\n        max-height: 72px; }\\n\\n.is-expanded > .child .parent > .leader {\\n      background-color: #D5DDE6; }\\n\\n.is-expanded > .child .parent > .structure .divisions {\\n      background-color: #F1F1F4; }\\n\"","import {\n  Component, OnInit, Input, ViewChildren, ElementRef, QueryList, AfterViewInit, ViewChild, HostListener, Inject\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\nimport { TreeNode } from 'src/app/services/trees/trees.service';\nimport { Department } from 'src/app/staff/services/departments/department';\nimport { EmployeesFactory } from 'src/app/staff/services/employees/employees.factory';\nimport { IListItemsPage } from 'src/app/services/list-items-service';\nimport { Employee } from 'src/app/staff/services/employees/employee';\n\nexport interface Cases {\n  nom: string;\n  gen: string;\n  plu: string;\n}\n\n@Component({\n  selector: 'app-orgstructure-tree',\n  templateUrl: './orgstructure-tree.component.html',\n  styleUrls: ['./orgstructure-tree.component.scss']\n})\nexport class OrgstructureTreeComponent implements AfterViewInit, OnInit {\n  @ViewChildren('structureItem', { read: ElementRef })\n  structureItems: QueryList<ElementRef>;\n  @ViewChild('list') list: ElementRef;\n  @ViewChild('employeesRef') employeesRef: ElementRef;\n\n  @ViewChildren('recurciveElement', { read: OrgstructureTreeComponent })\n  treeElements: QueryList<OrgstructureTreeComponent>;\n\n  parentElement: OrgstructureTreeComponent = null;\n\n  casesEmployee: Cases = {\n    nom: 'сотрудник',\n    gen: 'сотрудника',\n    plu: 'сотрудников'\n  };\n\n  casesDivisions: Cases = {\n    nom: 'подразделение',\n    gen: 'подразделения',\n    plu: 'подразделений'\n  };\n\n  @Input() trees: TreeNode<Department>[] = [];\n\n  employees: Employee[] = [];\n\n  constructor(@Inject('EmployeesFactory') private employeesFactory: EmployeesFactory,\n   @Inject(DOCUMENT) private document: Document) {}\n\n  ngOnInit() {}\n\n  @HostListener('document:click', ['$event.target'])\n  public onClick(targetElement) {\n    if (this.list && !this.list.nativeElement.contains(targetElement)) {\n      this.employeesRef.nativeElement.classList.remove('is-expanded');\n    }\n  }\n\n  ngAfterViewInit() {\n    this.treeElements.forEach(element => {\n      element.parentElement = this;\n    });\n  }\n\n  public toggleEmployees(event, domRef: HTMLElement, department: Department) {\n    if (domRef.classList.contains('is-expanded') === false) {\n      const elements = Array.from(document.querySelectorAll('.employees'));\n      elements.forEach( e => {\n        if (e.classList.contains('is-expanded')) {\n          e.classList.toggle('is-expanded');\n        }\n      });\n      this.employeesFactory\n        .search(undefined, department.id, undefined, 5000, 1)\n        .subscribe((employees: IListItemsPage<Employee>) => {\n          domRef.classList.toggle('is-expanded');\n          this.employees = employees.items;\n        });\n    } else {\n      domRef.classList.toggle('is-expanded');\n    }\n  }\n\n  public toggleItemTree(structureItem: HTMLElement, hasChild: Department) {\n    if (hasChild) {\n      structureItem.classList.toggle('is-expanded');\n      this.structureItems.toArray().forEach(element => {\n        element.nativeElement.classList.toggle('is-hidden');\n      });\n      this.treeElements.toArray().forEach(element => {\n        element.structureItems.toArray().forEach(e => {\n          if (e.nativeElement.classList.contains('is-hidden')) {\n            e.nativeElement.classList.toggle('is-hidden');\n          }\n          if (e.nativeElement.classList.contains('is-expanded')) {\n            e.nativeElement.classList.toggle('is-expanded');\n          }\n        });\n        element.treeElements.toArray().forEach(e => {\n          this.hideItemTree(e);\n        });\n      });\n    }\n  }\n\n  public units(num: number, cases: Cases): string {\n    num = Math.abs(num);\n    let word = '';\n    if (num.toString().indexOf('.') > -1) {\n      word = cases.gen;\n    } else {\n      word =\n        num % 10 === 1 && num % 100 !== 11\n          ? cases.nom\n          : num % 10 >= 2 &&\n            num % 10 <= 4 &&\n            (num % 100 < 10 || num % 100 >= 20)\n          ? cases.gen\n          : cases.plu;\n    }\n    return word;\n  }\n\n  private hideItemTree(item: OrgstructureTreeComponent) {\n    item.structureItems.toArray().forEach(element => {\n      if (!element.nativeElement.classList.contains('is-hidden')) {\n        element.nativeElement.classList.toggle('is-hidden');\n      }\n      if (element.nativeElement.classList.contains('is-expanded')) {\n        element.nativeElement.classList.toggle('is-expanded');\n      }\n    });\n    item.treeElements.forEach(element => {\n      this.hideItemTree(element);\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OrgstructurePageComponent } from './components/orgstructure-page/orgstructure-page.component';\nimport { DepartmentsResolver } from '../phonebook/services/departments/departments.resolver';\n// import { MsalGuard } from '@azure/msal-angular';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrgstructurePageComponent,\n    resolve: { departments: DepartmentsResolver },\n    // canActivate : [MsalGuard],\n    data: { animation: 'fadeAnimation', title: 'Оргструктура' }\n  }\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    providers: [DepartmentsResolver],\n    exports: [RouterModule]\n})\nexport class OrgstructureRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\n\nimport { SharedModule } from '../shared/shared.module';\n\nimport { OrgstructurePageComponent } from './components/orgstructure-page/orgstructure-page.component';\nimport { OrgstructureTreeComponent } from './components/orgstructure-tree/orgstructure-tree.component';\nimport { OrgstructureRoutingModule } from './orgstructure-routing.module';\nimport { StaffModule } from '../staff/staff.module';\n\n@NgModule({\n  declarations: [\n    OrgstructurePageComponent,\n    OrgstructureTreeComponent,\n  ],\n  imports: [\n    StaffModule,\n    RouterModule,\n    CommonModule,\n    OrgstructureRoutingModule,\n    SharedModule,\n    FormsModule\n  ]\n})\nexport class OrgstructureModule { }\n","import { Injectable } from '@angular/core';\n\nexport interface TreeNodeValue {\n  id: number;\n  title: string;\n  parentId?: number;\n}\n\nexport interface TreeNode<T extends TreeNodeValue> {\n  value: T;\n  childrens: TreeNode<T>[];\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TreesService {\n\n  constructor() { }\n\n  public getTreeOfArray<T extends TreeNodeValue>(items: T[]): TreeNode<T>[] {\n    const nodes: TreeNode<T>[] = [];\n    const map = {};\n    const roots: TreeNode<T>[] = [];\n    for (let i = 0; i < items.length; i += 1) {\n      const node: TreeNode<T> = { value: items[i], childrens: [] };\n      map[node.value.id] = i;\n      nodes.push(node);\n    }\n    for (let i = 0; i < nodes.length; i += 1) {\n      const node = nodes[i];\n      if (node.value.parentId != null) {\n        nodes[map[node.value.parentId]].childrens.push(node);\n      } else {\n        roots.push(node);\n      }\n    }\n    return roots;\n  }\n}\n"],"sourceRoot":""}