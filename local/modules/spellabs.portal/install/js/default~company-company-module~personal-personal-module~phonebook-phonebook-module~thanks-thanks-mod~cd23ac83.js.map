{"version":3,"sources":["webpack:///./src/app/services/security/current-user-id.resolver.ts","webpack:///./src/app/thanks/components/thanks-informer/thanks-informer.component.html","webpack:///./src/app/thanks/components/thanks-informer/thanks-informer.component.scss","webpack:///./src/app/thanks/components/thanks-informer/thanks-informer.component.ts","webpack:///./src/app/thanks/components/thanks-modal-form/thanks-modal-form.component.html","webpack:///./src/app/thanks/components/thanks-modal-form/thanks-modal-form.component.scss","webpack:///./src/app/thanks/components/thanks-modal-form/thanks-modal-form.component.ts","webpack:///./src/app/thanks/components/thanks-page/thanks-page.component.html","webpack:///./src/app/thanks/components/thanks-page/thanks-page.component.scss","webpack:///./src/app/thanks/components/thanks-page/thanks-page.component.ts","webpack:///./src/app/thanks/components/thanks-profile-informer/thanks-profile-informer.component.html","webpack:///./src/app/thanks/components/thanks-profile-informer/thanks-profile-informer.component.scss","webpack:///./src/app/thanks/components/thanks-profile-informer/thanks-profile-informer.component.ts","webpack:///./src/app/thanks/pipes/thanks-by-type.pipe-transform/thanks-by-type.pipe-transform.ts","webpack:///./src/app/thanks/services/thanks-types/thanks-types.resolver.ts","webpack:///./src/app/thanks/services/thanks/thanks.resolver.ts","webpack:///./src/app/thanks/thanks-routing.module.ts","webpack:///./src/app/thanks/thanks.module.ts"],"names":[],"mappings":"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","file":"default~company-company-module~personal-personal-module~phonebook-phonebook-module~thanks-thanks-mod~cd23ac83.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable, from, of } from 'rxjs';\n\nimport { SharepointService } from '../sharepoint/sharepoint.service';\n\n@Injectable()\nexport class CurrentUserIdResolver implements Resolve<number> {\n\n  constructor(private sharepointService: SharepointService) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<number> {\n    return of(this.sharepointService.getCurrentUserContext().userId);\n  }\n}\n","module.exports = \"<div class=\\\"l-gratitude\\\" [class.not-items]=\\\"!thanks.length\\\">\\n  <div class=\\\"l-gratitude__item\\\" *ngFor=\\\"let item of thanks\\\">\\n    <div class=\\\"date\\\">{{ item.dateTitle }}</div>\\n    <div class=\\\"body\\\">\\n      <div class=\\\"container\\\">\\n        <div class=\\\"author\\\">\\n          <div class=\\\"photo\\\">\\n            <div class=\\\"to-user\\\" (click)=\\\"goToProfile(item.fromUserLogin)\\\"></div>\\n            <app-user-thumb [photo]=\\\"item.fromUserPhoto\\\" [showStatus]=\\\"false\\\"></app-user-thumb>\\n          </div>\\n          <div class=\\\"title\\\">\\n            <div class=\\\"text\\\">{{ item.fromUserTitle }}</div>\\n          </div>\\n        </div>\\n        <div class=\\\"reward\\\">\\n          <div\\n            title=\\\"{{item.thanksTypeTitle}}\\\"\\n            class=\\\"icon\\\"\\n            [style.backgroundImage]=\\\"'url(' + getThanksTypeIconById(item.thanksTypeId) + ')'\\\"\\n          ></div>\\n          <div class=\\\"title\\\">\\n            <div class=\\\"text\\\">{{ item.thanksTypeTitle }}</div>\\n          </div>\\n        </div>\\n        <div class=\\\"awarded\\\">\\n          <div class=\\\"photo\\\">\\n            <div class=\\\"to-user\\\" (click)=\\\"goToProfile(item.toUserLogin)\\\"></div>\\n            <app-user-thumb [photo]=\\\"item.toUserPhoto\\\" [showStatus]=\\\"false\\\"></app-user-thumb>\\n          </div>\\n          <div class=\\\"title\\\">\\n            <div class=\\\"text\\\">{{ item.toUserTitle }}</div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"@charset \\\"UTF-8\\\";\\n#s4-bodyContainer {\\n  padding: 0; }\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n:host ::ng-deep .m-user-thumb {\\n  z-index: 1; }\\n.l-gratitude {\\n  padding: 20px;\\n  min-height: 320px;\\n  box-sizing: border-box;\\n  position: relative; }\\n.l-gratitude.not-items {\\n    background-color: #dedfe0; }\\n.l-gratitude.not-items:after {\\n      content: \\\"\\\";\\n      display: block;\\n      background: rgba(0, 0, 0, 0.2);\\n      position: absolute;\\n      top: 0;\\n      bottom: 0;\\n      right: 0;\\n      left: 0;\\n      z-index: 0;\\n      z-index: 0; }\\n.l-gratitude.not-items:before {\\n      z-index: 1;\\n      position: absolute;\\n      top: 50%;\\n      -webkit-transform: translateY(-50%);\\n          -ms-transform: translateY(-50%);\\n              transform: translateY(-50%);\\n      left: 0;\\n      right: 0;\\n      content: \\\"Нет благодарностей\\\";\\n      color: #fff;\\n      font-size: 16px;\\n      font-weight: 600;\\n      width: 100%;\\n      text-align: center; }\\n.l-gratitude__item {\\n  border-bottom: 2px dotted #95989a;\\n  box-sizing: border-box; }\\n.l-gratitude__item + .l-gratitude__item {\\n    padding-top: 3%; }\\n.l-gratitude__item:last-of-type {\\n    border-bottom: 0; }\\n.l-gratitude__item .date {\\n    color: #050505;\\n    font-weight: 600;\\n    font-size: 14px;\\n    text-transform: lowercase;\\n    margin-bottom: 4.5%; }\\n.l-gratitude__item .body {\\n    padding-bottom: 5px; }\\n.l-gratitude__item .body .container {\\n      display: table;\\n      table-layout: fixed;\\n      width: 100%;\\n      border-collapse: collapse; }\\n.l-gratitude__item .body .container .author,\\n      .l-gratitude__item .body .container .reward,\\n      .l-gratitude__item .body .container .awarded {\\n        position: relative;\\n        text-align: center;\\n        display: table-cell;\\n        height: 100%;\\n        vertical-align: top;\\n        white-space: normal;\\n        width: auto;\\n        font-size: 14px;\\n        color: #4d4e4d; }\\n.l-gratitude__item .body .container .author:before,\\n        .l-gratitude__item .body .container .reward:before,\\n        .l-gratitude__item .body .container .awarded:before {\\n          content: '';\\n          position: absolute;\\n          display: block;\\n          background-color: #dedfe0;\\n          top: 28px;\\n          width: 50%;\\n          left: 50%;\\n          height: 1px; }\\n.l-gratitude__item .body .container .author .photo,\\n        .l-gratitude__item .body .container .reward .photo,\\n        .l-gratitude__item .body .container .awarded .photo {\\n          position: relative; }\\n.l-gratitude__item .body .container .author .photo .to-user,\\n          .l-gratitude__item .body .container .reward .photo .to-user,\\n          .l-gratitude__item .body .container .awarded .photo .to-user {\\n            z-index: 2;\\n            position: absolute;\\n            left: 0;\\n            top: 0;\\n            right: 0;\\n            bottom: 0;\\n            cursor: pointer; }\\n.l-gratitude__item .body .container .author .title,\\n        .l-gratitude__item .body .container .reward .title,\\n        .l-gratitude__item .body .container .awarded .title {\\n          text-align: center;\\n          font-size: 0;\\n          display: inline-block;\\n          height: calc(100% - 56px);\\n          width: 100%; }\\n.l-gratitude__item .body .container .author .title .text,\\n          .l-gratitude__item .body .container .reward .title .text,\\n          .l-gratitude__item .body .container .awarded .title .text {\\n            width: 100%;\\n            font-size: 14px;\\n            line-height: 18px;\\n            display: inline-block; }\\n.l-gratitude__item .body .container .reward {\\n        width: 45%; }\\n.l-gratitude__item .body .container .reward .icon {\\n          background-repeat: no-repeat;\\n          background-position: 0 0;\\n          background-size: cover;\\n          width: 56px;\\n          height: 56px;\\n          border-radius: 100%;\\n          margin: 0 auto;\\n          background-color: #DEDFE0;\\n          position: relative;\\n          z-index: 1;\\n          margin-bottom: 6px; }\\n@media screen and (max-width: 1440px) {\\n          .l-gratitude__item .body .container .reward .title {\\n            display: none; } }\\n.l-gratitude__item .body .container .reward:before {\\n          content: '';\\n          width: 120%;\\n          left: -10%; }\\n.l-gratitude__item .body .container .awarded:before {\\n        content: '';\\n        left: 0; }\\n\"","import { Component, OnInit, Inject } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { NotificationsService } from 'src/app/shared/services/notifications/notifications.service';\nimport { Observable, of } from 'rxjs';\nimport { flatMap } from 'rxjs/operators';\nimport { EmployeesFactory } from 'src/app/staff/services/employees/employees.factory';\nimport { Thanks } from 'src/app/staff/services/thanks/thanks';\nimport { ThanksType } from 'src/app/staff/services/thanks-types/thanks-type';\nimport { ThanksFactory } from 'src/app/staff/services/thanks/thanks.factory';\nimport { ThanksTypesFactory } from 'src/app/staff/services/thanks-types/thanks-types.factory';\n\n@Component({\n  selector: 'app-thanks-informer',\n  templateUrl: './thanks-informer.component.html',\n  styleUrls: ['./thanks-informer.component.scss']\n})\nexport class ThanksInformerComponent implements OnInit {\n\n  public thanks: Thanks[] = [];\n  public thanksTypes: ThanksType[] = [];\n\n  constructor(\n    @Inject('ThanksFactory') private thanksFactory: ThanksFactory,\n    @Inject('EmployeesFactory') private employeesFactory: EmployeesFactory,\n    private router: Router,\n    private notificationsService: NotificationsService,\n    @Inject('ThanksTypesFactory') private thanksTypesFactory: ThanksTypesFactory) { }\n\n  public getThanksTypeIconById(id: number): string {\n    let type: any = this.thanksTypes.filter(item => item.id === id);\n    if (type[0] && type[0].icon) {\n      type = this.thanksTypes.filter(item => item.id === id)[0].icon;\n      return type;\n    } else {\n      return null;\n    }\n  }\n\n  public goToProfile(login: string) {\n    if (login && login !== '') {\n      this.employeesFactory\n        .getEmployeeByLogin(this.prepareLogin(login))\n        .subscribe(employee => {\n          if (employee && employee.id) {\n            this.router.navigate(['phonebook', employee.id]);\n          } else {\n            this.notificationsService.warning('Пользователя нет в списке сотрудников');\n          }\n        });\n    }\n  }\n\n  private prepareLogin(login: string) {\n    const l = login.split('|');\n    if (login && l) {\n      return l[l.length - 1];\n    } else {\n      return login;\n    }\n  }\n\n  ngOnInit() {\n    this.thanksTypesFactory.getItems().subscribe((thanksTypes) => {\n      this.thanksTypes = thanksTypes;\n    });\n    this.thanksFactory.getLastThanks(3).subscribe((thanks: Thanks[]) => {\n      this.thanks = thanks;\n    });\n  }\n}\n","module.exports = \"<div class=\\\"l-thanks-modal\\\" *ngIf=\\\"modalIsOpen\\\">\\n  <div class=\\\"l-thanks-modal__table\\\">\\n    <div class=\\\"l-thanks-modal__cell\\\">\\n      <form\\n        class=\\\"l-thanks-modal__content\\\"\\n        #form=\\\"ngForm\\\"\\n        novalidate\\n        (ngSubmit)=\\\"onSubmit(form)\\\"\\n      >\\n        <div class=\\\"l-thanks-modal__header\\\">\\n          <div class=\\\"logotype\\\"></div>\\n          <div class=\\\"body\\\">\\n            <div class=\\\"title\\\">Поблагодарить</div>\\n            <div class=\\\"description\\\">\\n              Воспользуйтесь формой, чтобы поблагодарить своего коллегу по работе\\n            </div>\\n          </div>\\n          <div class=\\\"close\\\">\\n            <input type=\\\"button\\\" class=\\\"btn btn-close\\\" (click)=\\\"closeModal()\\\" />\\n          </div>\\n        </div>\\n        <div class=\\\"l-thanks-modal__user\\\" *ngIf=\\\"photo != null\\\">\\n          <div class=\\\"content\\\">\\n            <div class=\\\"photo\\\">\\n              <app-sp-user\\n                *ngIf=\\\"userLogin\\\"\\n                (value)=\\\"changeUser($event)\\\"\\n                [login]=\\\"userLogin\\\"\\n                [isMulti]=\\\"false\\\"\\n                hidden\\n              ></app-sp-user>\\n              <app-user-thumb\\n                [photo]=\\\"photo\\\"\\n                [height]=\\\"'100%'\\\"\\n                [width]=\\\"'100%'\\\"\\n                [showStatus]=\\\"false\\\"\\n              ></app-user-thumb>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"l-thanks-modal__user-name\\\" *ngIf=\\\"fullName != null\\\">\\n          {{ fullName }}\\n        </div>\\n        <div class=\\\"l-thanks-modal__body\\\">\\n          <div class=\\\"select-employee\\\" *ngIf=\\\"photo == null\\\">\\n            <div class=\\\"title-modal\\\">\\n              Выберите сотрудника\\n            </div>\\n            <label class=\\\"error\\\" *ngIf=\\\"user == null && !formValid\\\">Обязательное поле</label>\\n            <div class=\\\"select\\\">\\n              <app-sp-user (value)=\\\"changeUser($event)\\\" [isMulti]=\\\"false\\\"></app-sp-user>\\n            </div>\\n          </div>\\n          <div class=\\\"select-thanks\\\">\\n            <label class=\\\"error\\\" *ngIf=\\\"thanksType?.errors?.required && !formValid\\\">\\n              Обязательное поле\\n            </label>\\n            <div class=\\\"title-modal\\\">\\n              Выберите тип благодарности:\\n            </div>\\n            <input\\n              name=\\\"thanksType\\\"\\n              [(ngModel)]=\\\"thanksTypeId\\\"\\n              required\\n              #thanksType=\\\"ngModel\\\"\\n              hidden\\n            />\\n            <div class=\\\"thanks-list\\\">\\n              <ng-container *ngFor=\\\"let item of thanksTypes\\\">\\n                <div\\n                  class=\\\"thanks-list__item\\\"\\n                  *ngIf=\\\"aviableThanks[item.id] && aviableThanks[item.id].amount > 0\\\"\\n                  [class.is-current-item]=\\\"thanksTypeId === item.id\\\"\\n                  (click)=\\\"this.thanksTypeId = item.id\\\"\\n                >\\n                  <div class=\\\"inner\\\">\\n                    <div class=\\\"reward-list\\\">\\n                      <i\\n                        *ngFor=\\\"let icon of counterIcons(aviableThanks[item.id].amount)\\\"\\n                        class=\\\"reward\\\"\\n                        [ngStyle]=\\\"{ 'background-image': 'url(' + item.icon + ')' }\\\"\\n                      ></i>\\n                    </div>\\n                    <div class=\\\"text\\\">\\n                      <div class=\\\"reward-text\\\">\\n                        {{ item.title }}\\n                      </div>\\n                      <div class=\\\"reward-count\\\" *ngIf=\\\"aviableThanks[item.id].amount\\\">\\n                        {{ getCountTitle(aviableThanks[item.id].amount) }}\\n                      </div>\\n                    </div>\\n                  </div>\\n                </div>\\n              </ng-container>\\n            </div>\\n            <div class=\\\"comment\\\">\\n              <div class=\\\"title-modal\\\">\\n                Комментарий\\n              </div>\\n              <div class=\\\"text\\\">\\n                <textarea\\n                  [(ngModel)]=\\\"thanksComment\\\"\\n                  id=\\\"comment\\\"\\n                  name=\\\"comment\\\"\\n                  maxlength=\\\"150\\\"\\n                ></textarea>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"l-thanks-modal__footer\\\">\\n          <div class=\\\"title\\\">\\n            Вам доступно по 3 благодарности каждого типа в течение одного месяца\\n          </div>\\n          <div class=\\\"button\\\">\\n            <input\\n              type=\\\"submit\\\"\\n              value=\\\"Отправить\\\"\\n              [disabled]=\\\"(form?.invalid && thanksTypeId == null) || isLoadingForm\\\"\\n            />\\n          </div>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.l-thanks-modal {\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background-color: rgba(5, 5, 5, 0.5);\\n  overflow-y: auto;\\n  z-index: 99999; }\\n\\n.l-thanks-modal__table {\\n  display: table;\\n  table-layout: fixed;\\n  width: 100%;\\n  height: 100%;\\n  border-collapse: collapse; }\\n\\n.l-thanks-modal__cell {\\n  display: table-cell;\\n  vertical-align: middle; }\\n\\n.l-thanks-modal__content {\\n  width: 45%;\\n  background-color: #fff;\\n  overflow: hidden;\\n  margin: 0 auto; }\\n\\n.l-thanks-modal__header {\\n  background-color: #dedfe0;\\n  box-sizing: border-box;\\n  position: relative;\\n  padding: 5%; }\\n\\n.l-thanks-modal__header .logotype {\\n    display: inline-block;\\n    width: 85px;\\n    height: 85px;\\n    vertical-align: top;\\n    background-image: url(/assets/icons/thanks-modal-icon.svg);\\n    background-repeat: no-repeat;\\n    background-size: cover;\\n    margin-right: 26px; }\\n\\n.l-thanks-modal__header .body {\\n    max-width: calc(100% - 115px);\\n    display: inline-block;\\n    vertical-align: top; }\\n\\n.l-thanks-modal__header .body .title {\\n      color: #050505;\\n      font-size: 34px;\\n      line-height: 38px;\\n      margin-bottom: 10px;\\n      font-weight: 600; }\\n\\n.l-thanks-modal__header .body .description {\\n      color: #050505;\\n      font-size: 22px;\\n      line-height: 30px; }\\n\\n.l-thanks-modal__header .close {\\n    position: absolute;\\n    top: 30px;\\n    right: 30px; }\\n\\n.l-thanks-modal__header .close .btn-close {\\n      background-color: #dedfe0; }\\n\\n.l-thanks-modal__user {\\n  text-align: center;\\n  position: relative;\\n  position: relative; }\\n\\n.l-thanks-modal__user:before {\\n    display: block;\\n    content: \\\" \\\";\\n    width: 100%;\\n    padding-bottom: 20%; }\\n\\n.l-thanks-modal__user > .content {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0; }\\n\\n.l-thanks-modal__user:after {\\n    content: \\\"\\\";\\n    z-index: 0;\\n    position: absolute;\\n    background-color: #dedfe0;\\n    left: 0;\\n    top: 0;\\n    right: 0;\\n    bottom: 50%;\\n    margin-top: -1px; }\\n\\n.l-thanks-modal__user .photo,\\n  .l-thanks-modal__user .text {\\n    position: relative;\\n    z-index: 1; }\\n\\n.l-thanks-modal__user .photo {\\n    height: 100%;\\n    margin: 0 auto;\\n    width: 20%; }\\n\\n.l-thanks-modal__user-name {\\n  color: #050505;\\n  font-size: 22px;\\n  line-height: 30px;\\n  text-align: center;\\n  margin-top: 10px; }\\n\\n.l-thanks-modal__body {\\n  max-width: 615px;\\n  margin: 0 auto;\\n  padding: 30px 20px;\\n  box-sizing: border-box; }\\n\\n.l-thanks-modal__body .title-modal {\\n    font-size: 16px;\\n    color: #707070;\\n    margin-bottom: 10px; }\\n\\n.l-thanks-modal__body .select-employee {\\n    margin-bottom: 35px; }\\n\\n.l-thanks-modal__body .select-employee .select {\\n      position: relative;\\n      z-index: 5; }\\n\\n.l-thanks-modal__body .select-employee .select input[type=\\\"button\\\"],\\n      .l-thanks-modal__body .select-employee .select input[type=\\\"search\\\"] {\\n        padding: 0;\\n        margin: 0;\\n        border: 0;\\n        min-width: 0;\\n        background-color: transparent;\\n        cursor: pointer;\\n        height: 50px;\\n        line-height: 50px;\\n        border: 1px solid #C4C0C0;\\n        width: 100%;\\n        cursor: inherit;\\n        font-size: 18px;\\n        color: #050505;\\n        padding: 0 20px;\\n        box-sizing: border-box; }\\n\\n.l-thanks-modal__body .select-employee .select input[type=\\\"button\\\"]:focus,\\n        .l-thanks-modal__body .select-employee .select input[type=\\\"search\\\"]:focus {\\n          outline: none; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list {\\n    margin-bottom: 30px; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item + .thanks-list__item {\\n      margin-top: 20px; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner {\\n      display: table;\\n      table-layout: fixed;\\n      width: 100%;\\n      border-collapse: collapse; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .reward-list,\\n      .l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .text {\\n        display: table-cell;\\n        vertical-align: middle;\\n        box-sizing: border-box; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .reward-list {\\n        font-size: 0;\\n        width: 135px;\\n        text-align: left; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .reward-list .reward {\\n          cursor: pointer;\\n          width: 55px;\\n          height: 55px;\\n          display: inline-block;\\n          vertical-align: top;\\n          background-repeat: no-repeat;\\n          background-position: 0 0;\\n          background-size: cover;\\n          background-color: #ddd;\\n          border-radius: 100%;\\n          position: relative;\\n          z-index: 1;\\n          box-sizing: border-box;\\n          border: 2px solid #fff; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .reward-list .reward:first-child {\\n            z-index: 2; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .reward-list .reward:last-child {\\n            z-index: 0; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .reward-list .reward + .reward {\\n            margin-left: -25px;\\n            background-image: none !important; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .text {\\n        cursor: pointer;\\n        padding-left: 20px;\\n        font-size: 20px;\\n        color: #050505; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .text .reward-text {\\n          line-height: 16px; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item .inner .text .reward-count {\\n          color: #707070;\\n          font-size: 14px; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item.is-current-item .reward:first-child {\\n      background-color: #EE2737 !important;\\n      background-position: 100% 0 !important; }\\n\\n.l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item.is-current-item .text,\\n    .l-thanks-modal__body .select-thanks .thanks-list .thanks-list__item.is-current-item .reward-count {\\n      color: #EE2737 !important; }\\n\\n.l-thanks-modal__body .comment .text textarea {\\n    display: block;\\n    width: 100%;\\n    resize: none;\\n    min-height: 100px;\\n    padding: 5px 10px;\\n    box-sizing: border-box;\\n    border: 1px solid #C4C0C0; }\\n\\n.l-thanks-modal__body .comment .text textarea:focus {\\n      outline: none; }\\n\\n.l-thanks-modal__footer {\\n  max-width: 615px;\\n  margin: 0 auto;\\n  padding: 0 20px;\\n  box-sizing: border-box;\\n  position: relative;\\n  padding-bottom: 45px; }\\n\\n.l-thanks-modal__footer .title {\\n    max-width: 315px;\\n    line-height: 24px;\\n    font-size: 16px;\\n    color: #050505;\\n    position: relative; }\\n\\n.l-thanks-modal__footer .title:before {\\n      content: \\\"*\\\";\\n      position: absolute;\\n      left: -15px;\\n      top: -5px;\\n      font-family: Arial;\\n      color: #EE2737;\\n      font-size: 24px; }\\n\\n.l-thanks-modal__footer .button input[type=\\\"button\\\"],\\n  .l-thanks-modal__footer .button input[type=\\\"submit\\\"] {\\n    padding: 0;\\n    margin: 0;\\n    border: 0;\\n    min-width: 0;\\n    background-color: transparent;\\n    cursor: pointer;\\n    height: 45px;\\n    line-height: 45px;\\n    width: 165px;\\n    text-align: center;\\n    font-size: 18px;\\n    color: #fff;\\n    background-color: #EE2737;\\n    border-radius: 3px;\\n    position: absolute;\\n    top: 0;\\n    right: 20px; }\\n\\n.l-thanks-modal__footer .button input[type=\\\"button\\\"]:focus,\\n    .l-thanks-modal__footer .button input[type=\\\"submit\\\"]:focus {\\n      outline: none; }\\n\\n.l-thanks-modal__footer .button input[type=\\\"button\\\"][disabled],\\n    .l-thanks-modal__footer .button input[type=\\\"submit\\\"][disabled] {\\n      background-color: #f98791; }\\n\\n:host ::ng-deep .sp-peoplepicker-topLevel {\\n  height: 50px;\\n  line-height: 50px;\\n  padding: 0 20px;\\n  font-size: 18px;\\n  color: #050505; }\\n\\n:host ::ng-deep .sp-peoplepicker-topLevel .sp-peoplepicker-initialHelpText {\\n    position: static; }\\n\\n:host ::ng-deep .sp-peoplepicker-topLevel .sp-peoplepicker-autoFillContainer {\\n    font-size: 14px;\\n    line-height: normal; }\\n\"","import { Component, OnInit, Input, Output, EventEmitter,\n  SimpleChanges, OnChanges, Inject, ElementRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { NgForm } from '@angular/forms';\nimport { SiteUserProps } from '@pnp/sp';\nimport { DOCUMENT } from '@angular/platform-browser';\nimport { NotificationsService } from 'src/app/shared/services/notifications/notifications.service';\nimport { Thanks } from 'src/app/staff/services/thanks/thanks';\nimport { ThanksType } from 'src/app/staff/services/thanks-types/thanks-type';\nimport { ThanksFactory } from 'src/app/staff/services/thanks/thanks.factory';\nimport { ThanksCountersFactory } from 'src/app/staff/services/thanks-counters/thanks-counters.factory';\nimport { ThanksCounter } from 'src/app/staff/services/thanks-counters/thanks-counter';\nimport { forkJoin } from 'rxjs';\nimport { ThanksTypesFactory } from 'src/app/staff/services/thanks-types/thanks-types.factory';\n\nexport interface AviableThanks {\n  id?: number;\n  title?: string;\n  amount?: number;\n  icon?: string;\n}\n\n@Component({\n  selector: 'app-thanks-modal-form',\n  templateUrl: './thanks-modal-form.component.html',\n  styleUrls: ['./thanks-modal-form.component.scss']\n})\nexport class ThanksModalFormComponent implements OnInit, OnChanges {\n  public aviableThanks: AviableThanks = {};\n  public thanks: Thanks[] = [];\n  public thanksTypeId: number = null;\n  public thanksComment: string = null;\n  public isLoadingForm = false;\n  public formValid: Boolean = true;\n  public user: SiteUserProps = null;\n  private maxAmountThanks = 3;\n  private bodyElement: HTMLElement = null;\n\n  @Input() refreshThanks: EventEmitter<null> = new EventEmitter();\n\n  @Output() refreshCounters: EventEmitter<null> = new EventEmitter();\n  @Output() close: EventEmitter<null> = new EventEmitter();\n  @Output() hasAviableThanks: EventEmitter<boolean> = new EventEmitter();\n\n  @Input() modalIsOpen = false;\n  @Input() userLogin: string = null;\n  @Input() userId: number = null;\n  @Input() photo: string = null;\n  @Input() fullName: string = null;\n\n  public thanksTypes: ThanksType[] = [];\n\n  constructor(\n    @Inject('ThanksFactory') private thanksFactory: ThanksFactory,\n    @Inject('ThanksCountersFactory') private thanksCountersFactory: ThanksCountersFactory,\n    private notificationsService: NotificationsService,\n    @Inject(DOCUMENT) private document: Document,\n    @Inject('ThanksTypesFactory') private thanksTypesFactory: ThanksTypesFactory\n  ) {\n    this.bodyElement = this.document.querySelector('.js-global-wrapper');\n  }\n\n  public closeModal() {\n    this.thanksComment = null;\n    this.thanksTypeId = null;\n    this.close.emit();\n  }\n\n  onSubmit(form: NgForm) {\n    if (this.user == null || this.user.LoginName == null) {\n      this.notificationsService.warning('Учетная запись пользователя не задана в системе');\n      this.formValid = false;\n    }\n    if (\n      form.valid &&\n      this.thanksTypeId != null &&\n      (this.user != null || this.userLogin != null)\n    ) {\n      this.formValid = true;\n      if (this.user.Id !== this.userId) {\n        this.createThanks();\n      } else {\n        this.notificationsService.warning('Вы не можете присвоить себе самому благодарность');\n      }\n    } else if (!form.valid) {\n      this.formValid = false;\n      return;\n    }\n  }\n\n  public counterIcons(i: number) {\n    return new Array(i);\n  }\n\n  public getCountTitle(count) {\n    switch (count) {\n      case 1:\n        return 'доступна одна';\n      case 2:\n        return 'доступны две';\n      case 3:\n        return 'доступны три';\n      default:\n        return null;\n    }\n  }\n\n  public createThanks() {\n    this.isLoadingForm = true;\n    this.thanksFactory\n      .createItem({\n        id: undefined,\n        title: undefined,\n        thanksTypeId: this.thanksTypeId,\n        toUserId: this.user.Id,\n        toUserEmail: this.user.Email,\n        toUserLogin: this.user.LoginName,\n        comment: this.thanksComment !== '' ? this.thanksComment : null\n      })\n      .subscribe(item => {\n        this.isLoadingForm = false;\n        if (item) {\n          this.closeModal();\n          this.getThanksCreatedByUserId();\n          this.createThanksCounter(item);\n          this.refreshThanks.emit();\n        }\n      });\n  }\n\n  public changeUser(users) {\n    this.user = users && users.length > 0 ? users[0] : null;\n  }\n\n  private createThanksCounter(item: Thanks) {\n    this.thanksCountersFactory\n      .getThanksCounter(item.toUserId, item.thanksTypeId)\n      .subscribe((counterElement: ThanksCounter) => {\n        if (counterElement) {\n          this.updateCounter(counterElement).then(() => {\n            this.createTotalThanksCounter(counterElement);\n          });\n        } else {\n          this.createCounter(item).then(() => {\n            this.createTotalThanksCounter(item);\n          });\n        }\n      });\n  }\n\n  private getThanksCreatedByUserId() {\n    forkJoin([\n      this.thanksTypesFactory.getItems(),\n      this.thanksFactory.getThanksCreatedByUserId(this.userId)\n    ]).subscribe(results => {\n      this.thanksTypes = results[0];\n      this.thanks = results[1];\n      this.updateAviableThanks(this.thanks);\n    });\n  }\n\n  private createTotalThanksCounter(item: any) {\n    this.thanksCountersFactory\n      .getThanksCounter(item.toUserId, undefined)\n      .subscribe(counter => {\n        item.thanksTypeId = undefined;\n        if (counter) {\n          this.updateCounter(counter).then(() => {\n            this.refreshCounters.emit();\n          });\n        } else {\n          this.createCounter(item).then(() => {\n            this.refreshCounters.emit();\n          });\n        }\n      });\n  }\n\n  private updateCounter(item: ThanksCounter) {\n    return new Promise((resolve, reject) => {\n      this.thanksCountersFactory\n        .updateItem({\n          id: item.id,\n          title: item.title,\n          thanksTypeId: item.thanksTypeId,\n          toUserId: item.toUserId,\n          count: item.count + 1,\n          positionName: item.positionName\n        })\n        .subscribe(() => {\n          resolve();\n        });\n    });\n  }\n\n  private createCounter(item: Thanks) {\n    return new Promise((resolve, reject) => {\n      this.thanksCountersFactory\n        .createItem({\n          id: undefined,\n          title: item.title,\n          thanksTypeId: item.thanksTypeId,\n          toUserId: item.toUserId,\n          count: 1\n        })\n        .subscribe(() => {\n          resolve();\n        });\n    });\n  }\n\n  private setAviableThanks(thanksTypes: ThanksType[]): void {\n    for (let i = 0; i < thanksTypes.length; i++) {\n      this.aviableThanks[thanksTypes[i].id] = {\n        id: thanksTypes[i].id,\n        title: thanksTypes[i].title,\n        amount: this.maxAmountThanks,\n        icon: thanksTypes[i].icon\n      };\n    }\n  }\n\n  private updateAviableThanks(thanks: Thanks[]): void {\n    this.setAviableThanks(this.thanksTypes);\n    const groupedByThanksType: object = _.groupBy(thanks, thank => thank.thanksTypeId);\n    for (const thanksTypeId in groupedByThanksType) {\n      if (groupedByThanksType.hasOwnProperty(thanksTypeId)) {\n        const length = groupedByThanksType[thanksTypeId].length;\n        const amount = length <= this.maxAmountThanks ? this.maxAmountThanks - length : 0;\n        if (length > 0) {\n          this.aviableThanks[thanksTypeId] = {\n            id: groupedByThanksType[thanksTypeId][length - 1].thanksTypeId,\n            title: groupedByThanksType[thanksTypeId][length - 1].thanksTypeTitle,\n            amount: amount,\n            icon: this.aviableThanks[thanksTypeId].icon\n          };\n        }\n        if (amount === 0) {\n          delete this.aviableThanks[thanksTypeId];\n        }\n      }\n    }\n    const isEmpty = Object.keys(this.aviableThanks).length === 0 ? true : false;\n    this.hasAviableThanks.emit(isEmpty);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.modalIsOpen.currentValue && this.bodyElement) {\n      this.bodyElement.classList.add('has-open-modal');\n    } else if (this.bodyElement && !changes.modalIsOpen.firstChange) {\n      this.user = null;\n      this.userLogin = null;\n      this.formValid = true;\n      this.bodyElement.classList.remove('has-open-modal');\n    }\n  }\n\n  ngOnInit() {\n    this.getThanksCreatedByUserId();\n  }\n}\n","module.exports = \"<div class=\\\"l-page-header\\\">\\n  <div class=\\\"l-breadcrumbs\\\">\\n    <div class=\\\"l-breadcrumb\\\"><a [routerLink]=\\\"['/company']\\\">Главная</a></div>\\n    <div class=\\\"l-breadcrumb\\\">Благодарности</div>\\n  </div>\\n  <div class=\\\"title\\\">\\n    <div class=\\\"text\\\">\\n      Благодарности\\n    </div>\\n    <input\\n      type=\\\"button\\\"\\n      class=\\\"thank-button\\\"\\n      value=\\\"Поблагодарить\\\"\\n      (click)=\\\"openThanksModal()\\\"\\n    />\\n  </div>\\n</div>\\n<div class=\\\"l-page\\\">\\n  <div class=\\\"l-page-inner\\\">\\n    <div class=\\\"l-page__content\\\">\\n      <div class=\\\"l-thanks\\\">\\n        <app-tabs\\n          (activeTab)=\\\"setActiveTab($event)\\\"\\n          [tabsItemPadding]=\\\"'0 45px'\\\"\\n          [tabsContentPadding]=\\\"'0px'\\\"\\n          [contentBgColor]=\\\"'#fff'\\\"\\n        >\\n          <app-tab [tabTitle]=\\\"'История'\\\">\\n            <div class=\\\"l-thanks__history\\\">\\n              <div class=\\\"l-thanks__filters\\\">\\n                <div class=\\\"filter\\\">\\n                  <div\\n                    class=\\\"inner\\\"\\n                    [class.is-active]=\\\"currentCompany === null\\\"\\n                  >\\n                    Все\\n                  </div>\\n                </div>\\n                <div class=\\\"filter\\\" *ngFor=\\\"let company of companies\\\">\\n                  <div\\n                    class=\\\"inner\\\"\\n                    [class.is-active]=\\\"company.id == currentCompany?.id\\\"\\n                  >\\n                    {{ company.title }}\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\\\"no-items\\\" *ngIf=\\\"!thanks.length\\\">\\n                Нет благодарностей\\n              </div>\\n              <div class=\\\"l-thanks__history-item\\\" *ngFor=\\\"let item of thanks\\\">\\n                <div class=\\\"date-time\\\">\\n                  <span>{{ item.date }}</span>\\n                </div>\\n                <div class=\\\"list\\\">\\n                  <div class=\\\"item\\\" *ngFor=\\\"let thanks of item.thanks\\\">\\n                    <div class=\\\"inner\\\">\\n                      <div class=\\\"left-side\\\">\\n                        <div class=\\\"thanks-info\\\">\\n                          <div class=\\\"from\\\">\\n                            <div\\n                              class=\\\"to-user\\\"\\n                              (click)=\\\"goToProfile(thanks.fromUserLogin)\\\"\\n                            ></div>\\n                            <app-user-thumb\\n                              [showStatus]=\\\"false\\\"\\n                              [width]=\\\"'90px'\\\"\\n                              [height]=\\\"'90px'\\\"\\n                              [photo]=\\\"thanks.fromUserPhoto\\\"\\n                            ></app-user-thumb>\\n                          </div>\\n                          <div class=\\\"thank\\\">\\n                            <i\\n                              title=\\\"{{ thanks.thanksTypeTitle }}\\\"\\n                              [ngStyle]=\\\"{\\n                                'background-image':\\n                                  'url(' +\\n                                  getThanksTypeIconById(thanks.thanksTypeId) +\\n                                  ')'\\n                              }\\\"\\n                            ></i>\\n                          </div>\\n                          <div class=\\\"to\\\">\\n                            <div\\n                              class=\\\"to-user\\\"\\n                              (click)=\\\"goToProfile(thanks.toUserLogin)\\\"\\n                            ></div>\\n                            <app-user-thumb\\n                              [showStatus]=\\\"false\\\"\\n                              [width]=\\\"'90px'\\\"\\n                              [height]=\\\"'90px'\\\"\\n                              [photo]=\\\"thanks.toUserPhoto\\\"\\n                            ></app-user-thumb>\\n                          </div>\\n                        </div>\\n                      </div>\\n                      <div class=\\\"right-side\\\">\\n                        <div class=\\\"title\\\">\\n                          {{ thanks.fromUserTitle }} <span>→</span>\\n                          {{ thanks.toUserTitle }}\\n                        </div>\\n                        <div class=\\\"thank\\\">«{{ thanks.thanksTypeTitle }}»</div>\\n                        <div class=\\\"description\\\" *ngIf=\\\"thanks.comment\\\">\\n                          {{ thanks.comment }}\\n                        </div>\\n                      </div>\\n                    </div>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </app-tab>\\n          <app-tab [tabTitle]=\\\"'Рейтинг'\\\">\\n            <div class=\\\"thanks-rating\\\">\\n              <div class=\\\"head\\\">\\n                <div class=\\\"row\\\">\\n                  <div class=\\\"inner\\\">\\n                    <div class=\\\"cell\\\"></div>\\n                    <div class=\\\"cell user-cell header\\\">\\n                      <div class=\\\"wrapper\\\">\\n                        <div class=\\\"l-thanks__filters\\\">\\n                          <div class=\\\"filter\\\">\\n                            <div\\n                              class=\\\"inner\\\"\\n                              [class.is-active]=\\\"currentCompany === null\\\"\\n                            >\\n                              Все\\n                            </div>\\n                          </div>\\n                          <div class=\\\"filter\\\" *ngFor=\\\"let company of companies\\\">\\n                            <div\\n                              class=\\\"inner\\\"\\n                              [class.is-active]=\\\"\\n                                company.id == currentCompany?.id\\n                              \\\"\\n                            >\\n                              {{ company.title }}\\n                            </div>\\n                          </div>\\n                        </div>\\n                      </div>\\n                    </div>\\n                    <div class=\\\"cell\\\" *ngFor=\\\"let type of thanksTypes\\\">\\n                      <i\\n                        class=\\\"icon-thanks\\\"\\n                        title=\\\"{{ type.title }}\\\"\\n                        [ngStyle]=\\\"{\\n                          'background-image': 'url(' + type.icon + ')'\\n                        }\\\"\\n                      ></i>\\n                    </div>\\n                    <div class=\\\"cell\\\">Всего</div>\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\\\"no-items\\\" *ngIf=\\\"!thanksRating.length\\\">\\n                Нет благодарностей\\n              </div>\\n              <div class=\\\"body\\\" [class.is-loading]=\\\"ratingIsLoading\\\">\\n                <ng-container\\n                  *ngFor=\\\"let itemRating of thanksRating; let i = index\\\"\\n                >\\n                  <div class=\\\"row\\\">\\n                    <div class=\\\"inner\\\">\\n                      <div class=\\\"cell\\\">\\n                        <div class=\\\"item-order\\\">\\n                          {{ i + 1 }}\\n                        </div>\\n                      </div>\\n                      <div class=\\\"cell user-cell\\\">\\n                        <div class=\\\"user\\\">\\n                          <div class=\\\"thumb\\\">\\n                            <app-user-thumb\\n                              [showStatus]=\\\"false\\\"\\n                              [width]=\\\"'90px'\\\"\\n                              [height]=\\\"'90px'\\\"\\n                              [photo]=\\\"itemRating.photo\\\"\\n                              [route]=\\\"itemRating.profileRoute\\\"\\n                            ></app-user-thumb>\\n                          </div>\\n                          <div class=\\\"info\\\">\\n                            <div class=\\\"title\\\">\\n                              {{ itemRating.userTitle }}\\n                            </div>\\n                            <div class=\\\"position\\\">\\n                              {{ itemRating.positionName }}\\n                            </div>\\n                            <div class=\\\"root-department\\\">\\n                              {{ itemRating.rootDepartmentTitle }}\\n                            </div>\\n                          </div>\\n                        </div>\\n                      </div>\\n                      <div class=\\\"cell\\\" *ngFor=\\\"let type of thanksTypes\\\">\\n                        <ng-container *ngFor=\\\"let item of itemRating.list\\\">\\n                          <ng-container *ngIf=\\\"type.id === item.thanksTypeId\\\">\\n                            {{ item.count }}\\n                          </ng-container>\\n                        </ng-container>\\n                      </div>\\n                      <div class=\\\"cell\\\">{{ itemRating.total }}</div>\\n                    </div>\\n                  </div>\\n                </ng-container>\\n                <div class=\\\"row is-current-user\\\" *ngIf=\\\"currentUserRating\\\">\\n                  <div class=\\\"inner\\\">\\n                    <div class=\\\"cell\\\">\\n                      <div class=\\\"item-order\\\" [style.background]=\\\"currentUserRating.index === null ? 'transparent' : '#EB113B'\\\">\\n                        {{\\n                          currentUserRating.index != null\\n                            ? currentUserRating.index + 1\\n                            : null\\n                        }}\\n                      </div>\\n                    </div>\\n                    <div class=\\\"cell user-cell\\\">\\n                      <div class=\\\"user\\\">\\n                        <div class=\\\"thumb\\\">\\n                          <div\\n                            class=\\\"to-user\\\"\\n                            (click)=\\\"goToProfile(currentUserRating.userLogin)\\\"\\n                          ></div>\\n                          <app-user-thumb\\n                            [showStatus]=\\\"false\\\"\\n                            [width]=\\\"'90px'\\\"\\n                            [height]=\\\"'90px'\\\"\\n                            [photo]=\\\"currentUserRating.photo\\\"\\n                          ></app-user-thumb>\\n                        </div>\\n                        <div class=\\\"info\\\">\\n                          <div class=\\\"title\\\">\\n                            {{ currentUserRating?.userTitle }}\\n                          </div>\\n                          <div class=\\\"position\\\">\\n                            {{ currentUserRating?.positionName }}\\n                          </div>\\n                          <div class=\\\"root-department\\\">\\n                            {{ currentUserRating?.rootDepartmentTitle }}\\n                          </div>\\n                        </div>\\n                      </div>\\n                    </div>\\n                    <div class=\\\"cell\\\" *ngFor=\\\"let type of thanksTypes\\\">\\n                      <ng-container\\n                        *ngFor=\\\"let item of currentUserRating?.list\\\"\\n                      >\\n                        <ng-container *ngIf=\\\"type.id === item.thanksTypeId\\\">\\n                          {{ item.count }}\\n                        </ng-container>\\n                      </ng-container>\\n                    </div>\\n                    <div class=\\\"cell\\\">{{ currentUserRating?.total }}</div>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </app-tab>\\n        </app-tabs>\\n      </div>\\n      <div class=\\\"l-thanks-modal\\\">\\n        <app-button-up></app-button-up>\\n        <app-thanks-modal-form\\n          [userId]=\\\"userId\\\"\\n          [modalIsOpen]=\\\"modalIsOpen\\\"\\n          (hasAviableThanks)=\\\"aviableThanksEmpty = $event\\\"\\n          (close)=\\\"closeThanksModal()\\\"\\n          (refreshThanks)=\\\"getThanks()\\\"\\n          (refreshCounters)=\\\"getThanksCounters()\\\"\\n        ></app-thanks-modal-form>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.l-page-inner {\\n  margin-bottom: 0; }\\n\\n.l-page {\\n  margin: 0;\\n  padding: 0; }\\n\\n.l-page-header {\\n  padding-top: 30px;\\n  padding-left: 50px;\\n  padding-right: 45px;\\n  padding-bottom: 45px;\\n  max-width: 100%; }\\n\\n.l-page-header .title {\\n    position: relative; }\\n\\n.l-page-header .title .text {\\n      margin-left: -2px; }\\n\\n.l-page-header .title input[type=\\\"button\\\"].thank-button {\\n      position: absolute;\\n      top: 50%;\\n      right: 0;\\n      -webkit-transform: translateY(-50%);\\n          -ms-transform: translateY(-50%);\\n              transform: translateY(-50%);\\n      padding: 0;\\n      margin: 0;\\n      border: 0;\\n      min-width: 0;\\n      background-color: transparent;\\n      cursor: pointer;\\n      height: 45px;\\n      line-height: 45px;\\n      box-sizing: border-box;\\n      padding: 0 25px;\\n      background-color: #EB113B;\\n      color: #fff;\\n      font-size: 18px;\\n      text-align: center;\\n      border-radius: 3px;\\n      font-family: Circe; }\\n\\n.l-page-header .title input[type=\\\"button\\\"].thank-button:focus {\\n        outline: none; }\\n\\n.l-page-header .title input[type=\\\"button\\\"].thank-button:focus {\\n        outline: none; }\\n\\n.no-items {\\n  height: 150px;\\n  line-height: 150px;\\n  text-align: center;\\n  font-size: 20px; }\\n\\n.item-order {\\n  width: 46px;\\n  height: 46px;\\n  line-height: 47px;\\n  border-radius: 100%;\\n  background-color: #fff;\\n  font-size: 22px;\\n  font-family: Arial, Helvetica, sans-serif;\\n  font-weight: 600;\\n  color: #050505; }\\n\\n@media screen and (max-width: 1440px) {\\n    .right-sidebar-opened .item-order {\\n      font-size: 18px;\\n      width: 40px;\\n      height: 40px;\\n      line-height: 40px; } }\\n\\n.is-current-user .item-order {\\n    background-color: #EE2737;\\n    color: #fff; }\\n\\n@media screen and (max-width: 1440px) {\\n  :host-context(.right-sidebar-opened) .icon-thanks {\\n    width: 50px !important;\\n    height: 50px !important; }\\n  :host-context(.right-sidebar-opened) .cell {\\n    font-size: 18px !important; }\\n    :host-context(.right-sidebar-opened) .cell .user .title {\\n      font-size: 18px !important; }\\n    :host-context(.right-sidebar-opened) .cell .user .position,\\n    :host-context(.right-sidebar-opened) .cell .user .root-department {\\n      font-size: 14px !important; } }\\n\\n.thanks-rating {\\n  position: relative; }\\n\\n.thanks-rating .row .inner {\\n    max-width: 1480px; }\\n\\n.thanks-rating .row.is-current-user {\\n    position: -webkit-sticky;\\n    position: sticky;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: #F7F7F7;\\n    z-index: 1; }\\n\\n.thanks-rating .cell {\\n    display: inline-block;\\n    vertical-align: middle;\\n    width: 7%; }\\n\\n.thanks-rating .cell:first-child {\\n      width: 95px; }\\n\\n.thanks-rating .cell.user-cell {\\n      width: 40%; }\\n\\n.thanks-rating .cell.user-cell.header {\\n        vertical-align: top;\\n        padding: 25px 0 !important; }\\n\\n.thanks-rating .cell.user-cell .wrapper {\\n        min-height: 100%;\\n        padding-left: 45px;\\n        margin-left: -95px;\\n        text-align: left;\\n        box-sizing: border-box;\\n        padding-right: 15px; }\\n\\n.thanks-rating .cell.user-cell .wrapper .l-thanks__filters {\\n          margin-bottom: 0; }\\n\\n.thanks-rating .head {\\n    border-bottom: 1px solid #DEDFE0;\\n    box-sizing: border-box; }\\n\\n.thanks-rating .head .cell {\\n      text-align: center;\\n      color: #747373;\\n      font-size: 22px;\\n      font-weight: 400;\\n      padding: 20px 0;\\n      box-sizing: border-box; }\\n\\n.thanks-rating .head .cell i {\\n        margin: 0 auto;\\n        display: block;\\n        width: 70px;\\n        height: 70px;\\n        background-repeat: no-repeat;\\n        background-position: 0 0;\\n        background-size: cover;\\n        background-color: #DEDFE0;\\n        border-radius: 100%; }\\n\\n.thanks-rating .body {\\n    position: relative; }\\n\\n.thanks-rating .body.is-loading:after {\\n      content: \\\"\\\";\\n      background-color: #ddd;\\n      position: absolute;\\n      left: 0;\\n      right: 0;\\n      top: 0;\\n      bottom: 0;\\n      opacity: .5; }\\n\\n.thanks-rating .body .cell {\\n      text-align: center;\\n      font-size: 22px;\\n      font-family: Arial, Helvetica, sans-serif;\\n      padding: 15px 0;\\n      box-sizing: border-box; }\\n\\n.thanks-rating .body .cell:empty:before {\\n        content: \\\"0\\\";\\n        display: block; }\\n\\n.thanks-rating .body .cell:first-child {\\n        vertical-align: top;\\n        padding-top: 30px;\\n        padding-right: 5px;\\n        padding-left: 35px; }\\n\\n.thanks-rating .body .cell:last-child {\\n        font-weight: 600; }\\n\\n.thanks-rating .body .cell .user {\\n        text-align: left;\\n        display: table;\\n        table-layout: fixed;\\n        width: 100%;\\n        border-collapse: collapse; }\\n\\n.thanks-rating .body .cell .user .thumb,\\n        .thanks-rating .body .cell .user .info {\\n          display: table-cell;\\n          vertical-align: middle;\\n          box-sizing: border-box; }\\n\\n.thanks-rating .body .cell .user .thumb {\\n          width: 90px;\\n          position: relative; }\\n\\n.thanks-rating .body .cell .user .thumb .to-user {\\n            position: absolute;\\n            top: 0;\\n            left: 0;\\n            right: 0;\\n            bottom: 0;\\n            z-index: 1;\\n            cursor: pointer; }\\n\\n.thanks-rating .body .cell .user .info {\\n          padding-left: 25px; }\\n\\n.thanks-rating .body .cell .user .info .title,\\n          .thanks-rating .body .cell .user .info .position,\\n          .thanks-rating .body .cell .user .info .root-department {\\n            color: #050505; }\\n\\n.thanks-rating .body .cell .user .info .title {\\n            font-size: 22px;\\n            font-weight: 600;\\n            line-height: 24px;\\n            color: #050505; }\\n\\n.thanks-rating .body .cell .user .info .title + .position {\\n              margin-top: 5px; }\\n\\n.thanks-rating .body .cell .user .info .position,\\n          .thanks-rating .body .cell .user .info .root-department {\\n            line-height: 20px;\\n            font-size: 16px; }\\n\\n.thanks-rating .body .cell .user .info .position + .root-department,\\n            .thanks-rating .body .cell .user .info .root-department + .root-department {\\n              margin-top: 5px; }\\n\\n@media screen and (max-width: 1440px) {\\n              .right-sidebar-opened .thanks-rating .body .cell .user .info .position, .right-sidebar-opened\\n              .thanks-rating .body .cell .user .info .root-department {\\n                font-size: 14px; } }\\n\\n.l-thanks__history {\\n  padding: 25px 45px;\\n  box-sizing: border-box; }\\n\\n.l-thanks__filters {\\n  margin: 0 -7.5px;\\n  font-size: 0;\\n  margin-bottom: 15px;\\n  min-height: 25px; }\\n\\n.l-thanks__filters .filter {\\n    padding: 0 7.5px;\\n    display: inline-block;\\n    vertical-align: top;\\n    margin-bottom: 15px; }\\n\\n.l-thanks__filters .filter .inner {\\n      padding: 0 12px;\\n      border-radius: 12px;\\n      border: 1px solid #898888;\\n      font-size: 14px;\\n      height: 25px;\\n      line-height: 25px;\\n      color: #898888;\\n      text-transform: uppercase;\\n      cursor: pointer; }\\n\\n.l-thanks__filters .filter .inner.is-active {\\n        border-color: #EB113B;\\n        color: #050505; }\\n\\n.l-thanks__history-item + .l-thanks__history-item {\\n  margin-top: 30px; }\\n\\n.l-thanks__history-item + .l-thanks__history-item .date-time::after {\\n    content: \\\"\\\";\\n    height: 3px;\\n    position: absolute;\\n    left: 0;\\n    right: 0;\\n    top: 50%;\\n    -webkit-transform: translateY(-50%);\\n        -ms-transform: translateY(-50%);\\n            transform: translateY(-50%);\\n    background-repeat: repeat-x;\\n    background-image: url(\\\"/assets/icons/icon-ellipse.svg\\\");\\n    background-size: contain;\\n    background-position: left center; }\\n\\n.l-thanks__history-item .date-time {\\n  font-size: 22px;\\n  font-family: Arial, Helvetica, sans-serif;\\n  color: #050505;\\n  margin-bottom: 15px;\\n  position: relative; }\\n\\n.l-thanks__history-item .date-time span {\\n    position: relative;\\n    padding-right: 10px; }\\n\\n.l-thanks__history-item .list .item + .item {\\n  margin-top: 30px; }\\n\\n.l-thanks__history-item .list .item .inner {\\n  display: table;\\n  table-layout: fixed;\\n  width: 100%;\\n  border-collapse: collapse; }\\n\\n.l-thanks__history-item .list .item .inner .left-side,\\n  .l-thanks__history-item .list .item .inner .right-side {\\n    display: table-cell;\\n    vertical-align: top;\\n    box-sizing: border-box; }\\n\\n.l-thanks__history-item .list .item .left-side {\\n  width: 315px; }\\n\\n.l-thanks__history-item .list .item .left-side .thanks-info {\\n    font-size: 0;\\n    margin: 0 -10px; }\\n\\n.l-thanks__history-item .list .item .left-side .thanks-info .to-user {\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      z-index: 1;\\n      cursor: pointer; }\\n\\n.l-thanks__history-item .list .item .left-side .from,\\n  .l-thanks__history-item .list .item .left-side .thank,\\n  .l-thanks__history-item .list .item .left-side .to {\\n    position: relative;\\n    display: inline-block;\\n    vertical-align: top;\\n    padding: 0 10px;\\n    box-sizing: border-box; }\\n\\n.l-thanks__history-item .list .item .left-side .thank i {\\n    display: block;\\n    width: 90px;\\n    height: 90px;\\n    background-repeat: no-repeat;\\n    background-position: 0 0;\\n    background-size: cover;\\n    background-color: #ddd;\\n    border-radius: 100%; }\\n\\n.l-thanks__history-item .list .item .right-side {\\n  padding-left: 30px;\\n  padding-top: 15px; }\\n\\n.l-thanks__history-item .list .item .right-side .title {\\n    font-size: 22px;\\n    font-weight: 600;\\n    color: #050505; }\\n\\n.l-thanks__history-item .list .item .right-side .title span {\\n      font-family: cursive; }\\n\\n.l-thanks__history-item .list .item .right-side .thank {\\n    text-transform: lowercase;\\n    font-size: 16px;\\n    color: #050505; }\\n\\n.l-thanks__history-item .list .item .right-side .thank + .description {\\n      margin-top: 10px; }\\n\\n.l-thanks__history-item .list .item .right-side .description {\\n    font-size: 16px;\\n    line-height: 28px;\\n    color: #707070;\\n    max-width: 775px; }\\n\\n:host ::ng-deep .m-tabs {\\n  background-color: #F7F7F7; }\\n\"","import { Component, OnInit, Inject } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { of, Observable } from 'rxjs';\nimport { flatMap } from 'rxjs/operators';\nimport { NotificationsService } from 'src/app/shared/services/notifications/notifications.service';\nimport { DOCUMENT } from '@angular/platform-browser';\nimport * as _ from 'lodash';\nimport { IListItemsPage } from 'src/app/services/list-items-service';\nimport { Employee } from 'src/app/staff/services/employees/employee';\nimport { EmployeesFactory } from 'src/app/staff/services/employees/employees.factory';\nimport { Thanks } from 'src/app/staff/services/thanks/thanks';\nimport { ThanksCounter } from 'src/app/staff/services/thanks-counters/thanks-counter';\nimport { ThanksType } from 'src/app/staff/services/thanks-types/thanks-type';\nimport { ThanksFactory } from 'src/app/staff/services/thanks/thanks.factory';\nimport { ThanksCountersFactory } from 'src/app/staff/services/thanks-counters/thanks-counters.factory';\nimport { CompaniesService } from 'src/app/services/companies/companies.service';\nimport { Company } from 'src/app/services/companies/company';\n\nexport interface GroupedThanks {\n  date: string;\n  thanks: Thanks[];\n}\n\nexport interface Total {\n  count: number;\n}\n\nexport interface GroupedThanksRating {\n  index?: number;\n  userId: number;\n  userTitle: string;\n  total: number;\n  userLogin: string;\n  positionName: string;\n  rootDepartmentTitle: string;\n  profileRoute: string[];\n  photo?: string;\n  list: ThanksCounter[];\n}\n\n@Component({\n  selector: 'app-thanks-page',\n  templateUrl: './thanks-page.component.html',\n  styleUrls: ['./thanks-page.component.scss']\n})\nexport class ThanksPageComponent implements OnInit {\n  public thanksUnGrouped: Thanks[] = [];\n  public thanksRatingUnGrouped: ThanksCounter[] = [];\n  public currentUserRating: GroupedThanksRating = null;\n  public thanks: GroupedThanks[] = [];\n  public thanksRating: GroupedThanksRating[] = [];\n  public thanksTypes: ThanksType[] = [];\n  public thanksCounters: ThanksCounter[] = [];\n  public userId: number = null;\n  private s4 = null;\n  public thanksPage: IListItemsPage<Thanks> = null;\n  public thanksRatingPage: IListItemsPage<ThanksCounter> = null;\n  private isLoadingItems: Boolean = false;\n  public ratingIsLoading: Boolean = false;\n  public modalIsOpen = false;\n  private activeTab = null;\n  public aviableThanksEmpty = false;\n  private employeesForRating: Employee[] = [];\n  public appContainerStyle = { 'background-color': '#F7F7F7', 'padding': '0px' };\n  public companies: Company[] = null;\n  public currentCompany: Company = null;\n\n  constructor(\n    @Inject(DOCUMENT) private document: Document,\n    @Inject('ThanksFactory') private thanksFactory: ThanksFactory,\n    @Inject('ThanksCountersFactory') private thanksCountersFactory: ThanksCountersFactory,\n    @Inject('EmployeesFactory') private employeesFactory: EmployeesFactory,\n    private notificationsService: NotificationsService,\n    private companiesService: CompaniesService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {\n  }\n\n  public openThanksModal() {\n    if (!this.aviableThanksEmpty) {\n      this.modalIsOpen = true;\n    } else {\n      alert(`На данный момент доступных благодарностей нет. `\n      + `Возможность оставить благодарность будет доступна в следующем месяце`);\n    }\n  }\n\n  public closeThanksModal() {\n    this.modalIsOpen = false;\n  }\n\n  public getThanks() {\n    const currentYear = new Date().getFullYear();\n    const start = new Date(currentYear, 0, 1).toISOString();\n    const end = new Date(currentYear, 11, 31).toISOString();\n    this.thanksFactory.getByPeriod(start, end)\n      .subscribe(thanks => {\n        this.thanksPage = thanks;\n        this.thanks = this.groupThanksByDate(this.thanksPage.items);\n      });\n  }\n\n  public getThanksTypeIconById(id: number): string {\n    let type: any = this.thanksTypes.filter(item => item.id === id);\n    if (type[0] && type[0].icon) {\n      type = this.thanksTypes.filter(item => item.id === id)[0].icon;\n      return type;\n    } else {\n      return null;\n    }\n  }\n\n  public refreshThanks(): void {\n    this.getThanks();\n    this.getThanksCounters();\n  }\n\n  private prepareLogin(login: string) {\n    if (login) {\n      const l = login.split('|');\n      return l[l.length - 1];\n    } else {\n      return login;\n    }\n  }\n\n  public goToProfile(login: string) {\n    if (login && login !== '') {\n      this.employeesFactory.getEmployeeByLogin(this.prepareLogin(login))\n        .subscribe(employee => {\n          if (employee && employee.id) {\n            this.router.navigate(['phonebook', employee.id]);\n          } else {\n            this.notificationsService.warning('Пользователя нет в списке сотрудников');\n          }\n        });\n    }\n  }\n\n  private groupThanksByDate(thanks: Thanks[]): GroupedThanks[] {\n    this.thanksUnGrouped = thanks;\n    const groupedThanks: GroupedThanks[] = [];\n    const groupedByDate: object = _.groupBy(this.thanksUnGrouped, thank => {\n      return thank.dateTitle;\n    });\n    for (const date in groupedByDate) {\n      if (groupedByDate.hasOwnProperty(date)) {\n        groupedThanks.push({\n          date: date,\n          thanks: groupedByDate[date]\n        });\n      }\n    }\n    return groupedThanks;\n  }\n\n  private groupThanksCountersByUser(\n    thanksRating: ThanksCounter[],\n    employees: Employee[]\n  ): GroupedThanksRating[] {\n    this.thanksRatingUnGrouped = thanksRating;\n    this.employeesForRating = this.employeesForRating.concat(employees);\n    const groupedThanksRating: GroupedThanksRating[] = [];\n    const groupedByUserId: object = _.groupBy(\n      this.thanksRatingUnGrouped,\n      thankRating => thankRating.toUserId\n    );\n    for (const id in groupedByUserId) {\n      if (groupedByUserId.hasOwnProperty(id)) {\n        const total = this.getSumOfCount(groupedByUserId[id]);\n        if (groupedByUserId[id].length) {\n          const login = groupedByUserId[id][0].toUserLogin;\n          const empl: Employee = this.employeesForRating.filter((e) => e.login === login)[0]\n            ? this.employeesForRating.filter(e => e.login === login)[0]\n            : null;\n          groupedThanksRating.push({\n            userId: Number(id),\n            userTitle: groupedByUserId[id][0].toUserTitle,\n            photo: groupedByUserId[id][0].toUserPhoto,\n            total: total.count,\n            userLogin: login,\n            rootDepartmentTitle: empl ? empl.rootLookupDepartmentTitle : 'Корневое подразделение не указано',\n            positionName: empl ? empl.positionName : 'Должность не указана',\n            profileRoute: empl ? empl.profileRoute : null,\n            list: groupedByUserId[id]\n          });\n        }\n      }\n    }\n    groupedThanksRating.sort((a, b) => (a.userTitle < b.userTitle ? -1 : 1));\n    groupedThanksRating.sort((a, b) => (a.total < b.total ? 1 : -1));\n    this.checkCurrentUserPlace(groupedThanksRating);\n    return groupedThanksRating;\n  }\n\n  private checkCurrentUserPlace(rating: GroupedThanksRating[]) {\n    let place = null;\n    const user = rating.filter((item, index) => {\n      if (item.userId === this.userId) {\n        place = index;\n      }\n      return item.userId === this.userId;\n    });\n    if (user && this.currentUserRating) {\n      this.currentUserRating.index = place;\n    }\n  }\n\n  private getSumOfCount(array): Total {\n    let total = { count: 0 };\n    if (array && array.length) {\n      total =\n        array.length > 1\n          ? array.reduce((a, b) => ({ count: a.count + b.count }))\n          : (total = { count: array[0].count });\n    }\n    return total;\n  }\n\n  private getCurrentUserRating() {\n    this.thanksCountersFactory.getRatingToUser(this.userId).subscribe((rating: ThanksCounter[]) => {\n      if (rating.length) {\n        const total = this.getSumOfCount(rating);\n        const r = rating[0];\n        const login = this.prepareLogin(r.toUserLogin);\n        this.getEmployeeForRating(login).subscribe((e: Employee) => {\n          if (e) {\n            this.currentUserRating = {\n              index: null,\n              userId: Number(r.toUserId),\n              userTitle: r.toUserTitle,\n              photo: e.photo,\n              total: total.count,\n              profileRoute: e.profileRoute,\n              rootDepartmentTitle: e.rootLookupDepartmentTitle,\n              userLogin: e.login,\n              positionName: e.positionName,\n              list: rating\n            };\n          }\n        });\n      } else {\n        this.employeesFactory.getCurrentEmployee().subscribe((e: Employee) => {\n          if (e) {\n            this.currentUserRating = {\n              index: null,\n              userId: e.id,\n              userTitle: e.fullName,\n              photo: e.photo,\n              total: 0,\n              profileRoute: e.profileRoute,\n              rootDepartmentTitle: e.rootLookupDepartmentTitle,\n              userLogin: e.login,\n              positionName: e.positionName,\n              list: []\n            };\n          }\n        });\n      }\n    });\n  }\n\n  public getThanksCounters() {\n    this.getRatingPage();\n    this.getCurrentUserRating();\n  }\n\n  public getThanksCreatedByUserId() {\n    this.thanksFactory.getThanksCreatedByUserId(this.userId).subscribe((thanks: Thanks[]) => {\n      return thanks;\n    });\n  }\n\n  private getRatingPage() {\n    this.ratingIsLoading = true;\n    this.thanksCountersFactory.getRating()\n      .subscribe((page: IListItemsPage<ThanksCounter>) => {\n        this.getRatingByUserIds(page).then((rating: ThanksCounter[]) => {\n          this.getEmployeesForRating(page.items).subscribe((e: Employee[]) => {\n            this.thanksRating = this.groupThanksCountersByUser(rating, e);\n          });\n        });\n      });\n  }\n\n  private getEmployeesForRating(ratingPage: ThanksCounter[]): Observable<Employee[]> {\n    const logins: string[] = [];\n    if (ratingPage.length > 0) {\n      for (let i = 0; i < ratingPage.length; i++) {\n        const login = this.prepareLogin(ratingPage[i].toUserLogin);\n        logins.push(login);\n      }\n      return this.employeesFactory.getEmployeeByLogins(logins);\n    } else {\n      return of([]);\n    }\n  }\n\n  private getEmployeeForRating(login: string): Observable<Employee> {\n    return this.employeesFactory.getEmployeeByLogin(login);\n  }\n\n  private getRatingByUserIds(page: IListItemsPage<ThanksCounter>) {\n    this.thanksRatingPage = page;\n    return new Promise((resolve, reject) => {\n      const ids: number[] = [];\n      if (page.items.length) {\n        for (let i = 0; i < page.items.length; i++) {\n          ids.push(page.items[i].toUserId);\n        }\n        this.thanksCountersFactory.getRatingByUserIds(ids)\n          .subscribe(thanksCounters => {\n            this.ratingIsLoading = false;\n            resolve(thanksCounters);\n          });\n      } else {\n        this.ratingIsLoading = false;\n        resolve([]);\n      }\n    });\n  }\n\n  public setActiveTab(tab: any) {\n    this.activeTab = tab;\n  }\n\n  public loadMoreThanks() {\n    this.isLoadingItems = true;\n    this.thanksPage.getNext().subscribe((page: IListItemsPage<Thanks>) => {\n      this.thanksPage = page;\n      this.thanksUnGrouped = this.thanksUnGrouped.concat(this.thanksPage.items);\n      this.thanks = this.groupThanksByDate(this.thanksUnGrouped);\n      this.isLoadingItems = false;\n    });\n  }\n\n  public loadMoreRating() {\n    this.ratingIsLoading = true;\n    this.thanksRatingPage.getNext().subscribe((page: IListItemsPage<Thanks>) => {\n      this.getRatingByUserIds(page).then((rating: ThanksCounter[]) => {\n        this.thanksRatingUnGrouped = this.thanksRatingUnGrouped.concat(rating);\n        this.getEmployeesForRating(page.items).subscribe((e: Employee[]) => {\n          this.thanksRating = this.groupThanksCountersByUser(this.thanksRatingUnGrouped, e);\n          this.ratingIsLoading = false;\n        });\n      });\n    });\n  }\n\n  private onWorkSpaceScroll() {\n    if (this.s4.scrollTop >= this.s4.scrollHeight - (this.s4.clientHeight + 100)) {\n      if (\n        this.thanksPage.hasNext &&\n        !this.isLoadingItems &&\n        this.activeTab.tabTitle === 'История'\n      ) {\n        this.loadMoreThanks();\n      }\n      if (\n        this.thanksRatingPage.hasNext &&\n        !this.ratingIsLoading &&\n        this.activeTab.tabTitle === 'Рейтинг'\n      ) {\n        this.loadMoreRating();\n      }\n    }\n  }\n\n  ngOnInit() {\n    this.companiesService.getItems().subscribe((companies: Company[]) => this.companies = companies);\n    this.companiesService.getCompanyForCurrentUser().subscribe((company: Company) => this.currentCompany = company);\n    this.s4 = this.document.getElementById('s4-workspace');\n    this.s4.addEventListener('scroll', this.onWorkSpaceScroll.bind(this), true);\n\n    this.userId = this.route.snapshot.data.userId;\n    this.thanksTypes = this.route.snapshot.data.thanksTypes;\n    this.thanksPage = this.route.snapshot.data.thanks;\n    this.thanks = this.groupThanksByDate(this.thanksPage.items);\n    this.getThanksCounters();\n  }\n}\n","module.exports = \"<div class=\\\"thanks-list\\\" *ngIf=\\\"isThanksLoaded\\\">\\n  <div class=\\\"thanks\\\" *ngFor=\\\"let item of thanksTypes\\\">\\n    <div class=\\\"info\\\">\\n      <div class=\\\"reward\\\">\\n        <div class=\\\"icon\\\">\\n          <i title=\\\"{{item.title}}\\\" [style.backgroundImage]=\\\"'url(' + item.icon + ')'\\\"></i>\\n        </div>\\n        <div class=\\\"text\\\">\\n          <span>{{ item.title }}</span>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"employees\\\">\\n      <div\\n        class=\\\"employee\\\"\\n        *ngFor=\\\"let thnk of (thanks | thanksByType: item).slice(0, 3)\\\"\\n      >\\n      <div class=\\\"to-user\\\" (click)=\\\"goToProfile(thnk.fromUserLogin)\\\" title=\\\"{{thnk.fromUserTitle}}\\\"></div>\\n        <app-user-thumb\\n          [width]=\\\"'55px'\\\"\\n          [height]=\\\"'55px'\\\"\\n          [route]=\\\"null\\\"\\n          [photo]=\\\"thnk.fromUserPhoto\\\"\\n          [showStatus]=\\\"false\\\"\\n        ></app-user-thumb>\\n      </div>\\n      <div class=\\\"employees-more\\\"\\n          *ngIf=\\\"(thanks | thanksByType: item).length > 3\\\"\\n          #employeesRef\\n          >\\n        <div class=\\\"text\\\" (click)=\\\"toggleEmployees(employeesRef)\\\">\\n          + {{ (thanks | thanksByType: item).length - 3 }}\\n        </div>\\n        <!-- <div class=\\\"list-employees\\\">\\n          <input type=\\\"button\\\" (click)=\\\"toggleEmployees(employeesRef)\\\"/>\\n          <div class=\\\"list\\\">\\n            <div class=\\\"item-employee\\\"\\n            (click)=\\\"goToProfile(thnk.fromUserLogin)\\\"\\n            *ngFor=\\\"let thnk of (thanks | thanksByType: item).slice(3)\\\">\\n              <div class=\\\"photo\\\">\\n                <app-user-thumb\\n                  [width]=\\\"'35px'\\\"\\n                  [height]=\\\"'35px'\\\"\\n                  [photo]=\\\"thnk.fromUserPhoto\\\"\\n                  [route]=\\\"false\\\">\\n                </app-user-thumb>\\n              </div>\\n              <div class=\\\"full-name\\\">{{ thnk.fromUserTitle }}</div>\\n            </div>\\n          </div>\\n        </div> -->\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \".thanks-list .thanks {\\n  position: relative;\\n  display: table;\\n  table-layout: auto;\\n  height: 55px;\\n  width: 100%;\\n  border-collapse: collapse;\\n  box-sizing: border-box; }\\n  .thanks-list .thanks .count,\\n  .thanks-list .thanks .info,\\n  .thanks-list .thanks .employees {\\n    display: table-cell;\\n    vertical-align: middle;\\n    box-sizing: border-box;\\n    width: auto; }\\n  .thanks-list .thanks + .thanks {\\n    margin-top: 25px; }\\n  .thanks-list .thanks .reward {\\n    display: table;\\n    table-layout: fixed;\\n    height: 100%;\\n    width: 100%;\\n    border-collapse: collapse; }\\n  .thanks-list .thanks .reward .icon,\\n    .thanks-list .thanks .reward .text {\\n      display: table-cell;\\n      vertical-align: middle;\\n      box-sizing: border-box;\\n      font-size: 14px;\\n      color: #4D4E4D;\\n      width: auto; }\\n  .thanks-list .thanks .reward .icon {\\n      width: 55px; }\\n  .thanks-list .thanks .reward .icon i {\\n        width: 55px;\\n        height: 55px;\\n        display: block;\\n        height: 100%;\\n        border-radius: 100%;\\n        background-color: #DEDFE0;\\n        background-position: 0 center;\\n        background-size: cover; }\\n  .thanks-list .thanks .reward .text {\\n      padding-left: 15px; }\\n  .thanks-list .thanks .reward .text span {\\n        display: block;\\n        max-width: 150px; }\\n  .thanks-list .thanks .info {\\n    width: 250px; }\\n  .thanks-list .thanks .employees {\\n    width: auto;\\n    font-size: 0; }\\n  .thanks-list .thanks .employees .employee {\\n      display: inline-block;\\n      vertical-align: middle;\\n      position: relative; }\\n  .thanks-list .thanks .employees .employee .to-user {\\n        position: absolute;\\n        left: 0;\\n        top: 0;\\n        right: 0;\\n        bottom: 0;\\n        z-index: 1;\\n        cursor: pointer; }\\n  .thanks-list .thanks .employees .employee + .employee {\\n        margin-left: -10px; }\\n  .thanks-list .thanks .employees .employees-more {\\n      position: relative;\\n      display: inline-block;\\n      vertical-align: middle;\\n      height: 55px;\\n      min-width: 55px;\\n      padding-left: 10px;\\n      box-sizing: border-box; }\\n  .thanks-list .thanks .employees .employees-more .text {\\n        text-align: center;\\n        line-height: 55px;\\n        color: #898888;\\n        font-size: 26px;\\n        font-family: Arial;\\n        cursor: pointer; }\\n\"","import { Component, OnInit, Inject, EventEmitter, Input } from '@angular/core';\nimport { Employee } from 'src/app/staff/services/employees/employee';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { SharepointService } from 'src/app/services/sharepoint/sharepoint.service';\nimport { NotificationsService } from 'src/app/shared/services/notifications/notifications.service';\nimport { EmployeesFactory } from 'src/app/staff/services/employees/employees.factory';\nimport { Thanks } from 'src/app/staff/services/thanks/thanks';\nimport { ThanksType } from 'src/app/staff/services/thanks-types/thanks-type';\nimport { ThanksService } from 'src/app/staff/services/thanks/thanks.service';\nimport { ThanksFactory } from 'src/app/staff/services/thanks/thanks.factory';\nimport { ThanksTypesFactory } from 'src/app/staff/services/thanks-types/thanks-types.factory';\nimport { forkJoin, Subscription } from 'rxjs';\nimport { SecurityService } from 'src/app/services/security/security.service';\nimport { map, flatMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-thanks-profile-informer',\n  templateUrl: './thanks-profile-informer.component.html',\n  styleUrls: ['./thanks-profile-informer.component.scss']\n})\nexport class ThanksProfileInformerComponent implements OnInit {\n\n  public thanksTypes: ThanksType[] = [];\n  public thanks: Thanks[] = [];\n\n  @Input() refresh: EventEmitter<null> = new EventEmitter();\n\n  public modalIsOpen = false;\n  public aviableThanksEmpty = false;\n  public isThanksLoaded = false;\n  public userId = null;\n\n  private subscription: Subscription;\n  private employeeId: number = null;\n\n  constructor(private route: ActivatedRoute,\n    private sharepointService: SharepointService,\n    private notificationsService: NotificationsService,\n    @Inject('EmployeesFactory') private employeesFactory: EmployeesFactory,\n    @Inject('ThanksFactory') private thanksFactory: ThanksFactory,\n    @Inject('ThanksTypesFactory') private thanksTypesFactory: ThanksTypesFactory,\n    private securityService: SecurityService,\n    private router: Router) { }\n\n  ngOnInit() {\n    this.userId = this.route.snapshot.data.userId;\n    this.subscription = this.route.data\n      .pipe(flatMap(data => this.securityService.ensureUser(data.employee.login.replace('/', '\\\\'))))\n      .subscribe(data => {\n        this.employeeId = data.data.Id;\n        this.refreshThanks();\n      });\n    this.refresh.subscribe(() => this.refreshThanks());\n  }\n\n  public refreshThanks() {\n    this.isThanksLoaded = false;\n    forkJoin([\n      this.thanksTypesFactory.getItems(),\n      this.thanksFactory.getThanksCreatedToUserId(this.employeeId)\n    ]).subscribe(results => {\n      this.thanksTypes = results[0];\n      this.thanks = results[1];\n      this.isThanksLoaded = true;\n    });\n  }\n\n  public openThanksModal() {\n    if (!this.aviableThanksEmpty) {\n      this.modalIsOpen = true;\n    } else {\n      this.notificationsService.warning(`На данный момент доступных благодарностей нет.\n      Возможность оставить благодарность будет доступна в следующем месяце`);\n    }\n  }\n\n  public closeThanksModal() {\n    this.modalIsOpen = false;\n  }\n\n  public counterIcons(i: number) {\n    return new Array(i);\n  }\n\n  public getEmployeeLink(employee: Employee) {\n    return (\n      `${window.location.protocol}//${window.location.host}` +\n      `${this.sharepointService.getCurrentUserContext().webServerRelativeUrl}` +\n      `/PortalPages/home.aspx#/phonebook/${employee.id}`\n    );\n  }\n\n  public goToProfile(login: string) {\n    if (login && login !== '') {\n      this.employeesFactory.getEmployeeByLogin(this.prepareLogin(login))\n        .subscribe(employee => {\n          if (employee && employee.id) {\n            this.router.navigate(['phonebook', employee.id]);\n          } else {\n            this.notificationsService.warning('Пользователя нет в списке сотрудников');\n          }\n        });\n    }\n  }\n\n  private prepareLogin(login: string) {\n    if (login) {\n      const l = login.split('|');\n      return l[l.length - 1];\n    } else {\n      return login;\n    }\n  }\n\n  public toggleEmployees(domRef: HTMLElement) {\n    if (domRef.classList.contains('is-expanded') === false) {\n      const elements = Array.from(document.querySelectorAll('.employees-more'));\n      elements.forEach( e => {\n        if (e.classList.contains('is-expanded')) {\n          e.classList.toggle('is-expanded');\n        }\n      });\n      domRef.classList.toggle('is-expanded');\n    } else {\n      domRef.classList.remove('is-expanded');\n    }\n }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { ThanksType } from 'src/app/staff/services/thanks-types/thanks-type';\nimport { Thanks } from 'src/app/staff/services/thanks/thanks';\n\n@Pipe({\n  name: 'thanksByType',\n  pure: false\n})\nexport class ThanksByTypePipeTransform implements PipeTransform {\n  transform(value: Thanks[], args: ThanksType): Thanks[] {\n    return value.filter(c => c.thanksTypeId === args.id);\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\nimport { Observable } from 'rxjs';\nimport { ThanksTypesFactory } from 'src/app/staff/services/thanks-types/thanks-types.factory';\nimport { ThanksType } from 'src/app/staff/services/thanks-types/thanks-type';\n\n@Injectable()\nexport class ThanksTypesResolver implements Resolve<ThanksType[]> {\n\n  constructor(@Inject('ThanksTypesFactory') private thanksTypesFactory: ThanksTypesFactory) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<ThanksType[]> {\n    return this.thanksTypesFactory.getItems();\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\nimport { Observable } from 'rxjs';\nimport { IListItemsPage } from 'src/app/services/list-items-service';\nimport { ThanksFactory } from 'src/app/staff/services/thanks/thanks.factory';\nimport { Thanks } from 'src/app/staff/services/thanks/thanks';\n\n@Injectable()\nexport class ThanksResolver implements Resolve<IListItemsPage<Thanks>> {\n\n  constructor(@Inject('ThanksFactory') private thanksFactory: ThanksFactory) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<IListItemsPage<Thanks>> {\n    const currentYear = new Date().getFullYear();\n    const start = new Date(currentYear, 0, 1).toISOString();\n    const end = new Date(currentYear, 11, 31).toISOString();\n    return this.thanksFactory.getByPeriod(start, end);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ThanksPageComponent } from './components/thanks-page/thanks-page.component';\nimport { ThanksResolver } from './services/thanks/thanks.resolver';\nimport { ThanksTypesResolver } from './services/thanks-types/thanks-types.resolver';\nimport { CurrentUserIdResolver } from '../services/security/current-user-id.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ThanksPageComponent,\n    data: { animation: 'fadeAnimation' },\n    resolve: {\n      thanks: ThanksResolver,\n      thanksTypes: ThanksTypesResolver,\n      userId: CurrentUserIdResolver\n    }\n  }\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    providers: [\n      CurrentUserIdResolver,\n      ThanksResolver,\n      ThanksTypesResolver\n    ],\n    exports: [RouterModule]\n})\nexport class ThanksRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThanksRoutingModule } from './thanks-routing.module';\nimport { SharedModule } from '../shared/shared.module';\nimport { ThanksProfileInformerComponent } from './components/thanks-profile-informer/thanks-profile-informer.component';\nimport { ThanksModalFormComponent } from './components/thanks-modal-form/thanks-modal-form.component';\nimport { ThanksPageComponent } from './components/thanks-page/thanks-page.component';\nimport { ThanksByTypePipeTransform } from './pipes/thanks-by-type.pipe-transform/thanks-by-type.pipe-transform';\nimport { ThanksInformerComponent } from './components/thanks-informer/thanks-informer.component';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [\n    ThanksProfileInformerComponent,\n    ThanksInformerComponent,\n    ThanksModalFormComponent,\n    ThanksPageComponent,\n    ThanksByTypePipeTransform\n  ],\n  imports: [\n    FormsModule,\n    CommonModule,\n    ThanksRoutingModule,\n    SharedModule\n  ],\n  exports: [\n    ThanksInformerComponent,\n    ThanksModalFormComponent,\n    ThanksProfileInformerComponent\n  ]\n})\nexport class ThanksModule { }\n"],"sourceRoot":""}