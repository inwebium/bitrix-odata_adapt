{"version":3,"sources":["webpack:///./src/app/news/components/news-card-gallery/news-card-gallery.component.html","webpack:///./src/app/news/components/news-card-gallery/news-card-gallery.component.scss","webpack:///./src/app/news/components/news-card-gallery/news-card-gallery.component.ts","webpack:///./src/app/news/components/news-card-page/news-card-page.component.html","webpack:///./src/app/news/components/news-card-page/news-card-page.component.scss","webpack:///./src/app/news/components/news-card-page/news-card-page.component.ts","webpack:///./src/app/news/components/news-page/news-page.component.html","webpack:///./src/app/news/components/news-page/news-page.component.scss","webpack:///./src/app/news/components/news-page/news-page.component.ts","webpack:///./src/app/news/news-routing.module.ts","webpack:///./src/app/news/news.module.ts","webpack:///./src/app/services/companies/company-web.resolver.ts","webpack:///./src/app/services/companies/company.resolver.ts","webpack:///./src/app/services/news-rubrics/news-rubrics.resolver.ts","webpack:///./src/app/services/news/news-card.resolver.ts","webpack:///./src/app/services/news/news-of-rubric.resolver.ts","webpack:///./src/app/services/news/news.resolver.ts","webpack:///./src/app/services/security/current-user-id.resolver.ts","webpack:///./src/app/services/security/groups.resolver.ts"],"names":[],"mappings":"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","file":"default~enterprise-enterprise-module~incidents-incidents-module~news-news-module.js","sourcesContent":["module.exports = \"<div class=\\\"l-news-card-carousel\\\">\\n  <div class=\\\"content\\\">\\n    <ngsl-carousel [timing]=\\\"600\\\" [dots]=\\\"false\\\" [infinity]=\\\"false\\\" [perView]=\\\"items.length && items.length > 3 ? 3 : items.length\\\" [margin]=\\\"10\\\">\\n      <div class=\\\"list\\\">\\n        <ng-container *ngFor=\\\"let item of items; let i = index\\\">\\n          <ng-container *ngslCarouselItem>\\n            <div class=\\\"photo\\\" (click)=\\\"ngslGallery.handleToggleGallery(i, $event)\\\">\\n              <div\\n                class=\\\"content\\\"\\n                [ngStyle]=\\\"{'background-image': 'url(' + prepareLink(item) + ')'}\\\"\\n              ></div>\\n            </div>\\n          </ng-container>\\n        </ng-container>\\n      </div>\\n    </ngsl-carousel>\\n    <ngsl-gallery #ngslGallery=\\\"ngsl-gallery\\\">\\n      <ng-container *ngFor=\\\"let item of items; let i = index\\\">\\n        <div id=\\\"i\\\" class=\\\"m-albom-popup\\\" *ngslGalleryItem>\\n          <div class=\\\"m-news-gallery-popup\\\">\\n            <div class=\\\"content\\\">\\n              <div class=\\\"photo\\\" [ngStyle]=\\\"{'background-image': 'url(' + prepareLink(item) + ')'}\\\"></div>\\n            </div>\\n          </div>\\n        </div>\\n      </ng-container>\\n    </ngsl-gallery>\\n  </div>\\n</div>\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.l-news-card-carousel {\\n  position: relative; }\\n\\n.l-news-card-carousel:before {\\n    display: block;\\n    content: \\\" \\\";\\n    width: 100%;\\n    padding-bottom: 25%; }\\n\\n.l-news-card-carousel > .content {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0; }\\n\\n.photo {\\n  height: 100%;\\n  padding: 0px;\\n  box-sizing: border-box;\\n  cursor: pointer;\\n  padding: 0 1px; }\\n\\n.photo .content {\\n    height: 100%;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    background-size: cover; }\\n\\n.m-news-gallery-popup {\\n  position: relative; }\\n\\n.m-news-gallery-popup:before {\\n    display: block;\\n    content: \\\" \\\";\\n    width: 100%;\\n    padding-bottom: 71.42857143%; }\\n\\n.m-news-gallery-popup > .content {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0; }\\n\\n.m-news-gallery-popup .content {\\n    padding: 15px;\\n    box-sizing: border-box;\\n    background-color: #fff; }\\n\\n.m-news-gallery-popup .title {\\n    font-size: 14px;\\n    color: #fff;\\n    font-weight: 600;\\n    position: absolute;\\n    z-index: 10;\\n    bottom: -50px;\\n    height: 35px;\\n    line-height: 35px;\\n    display: inline-block;\\n    background-color: #000;\\n    padding: 0 15px;\\n    border-radius: 15px;\\n    left: 50%;\\n    -webkit-transform: translateX(-50%);\\n        -ms-transform: translateX(-50%);\\n            transform: translateX(-50%); }\\n\\n.m-news-gallery-popup .photo {\\n    height: 100%;\\n    background-size: cover;\\n    background-position: center;\\n    background-repeat: no-repeat;\\n    position: relative; }\\n\\n.m-news-gallery-popup .photo .controls {\\n      position: absolute;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      transition: bottom 0.3s;\\n      padding: 15px 20px;\\n      box-sizing: border-box;\\n      height: 135px;\\n      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.01) 0%, rgba(46, 46, 46, 0.8) 100%);\\n      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#03000000', endColorstr='#cc585858', GradientType=0); }\\n\\n.m-news-gallery-popup .photo .controls .control {\\n        position: absolute;\\n        right: 20px;\\n        bottom: 15px; }\\n\\n.m-news-gallery-popup .photo .controls .control .btn-download {\\n          z-index: 100; }\\n\\n.m-news-gallery-popup .photo .controls .control .btn-download span {\\n            text-transform: uppercase;\\n            font-weight: 400; }\\n\"","import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-news-card-gallery',\n  templateUrl: './news-card-gallery.component.html',\n  styleUrls: ['./news-card-gallery.component.scss']\n})\nexport class NewsCardGalleryComponent implements OnInit {\n\n  @Input() items: string[] = [];\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  public prepareLink(link: string) {\n    return link && link.replace(/\\(/gi, '\\\\(').replace(/\\)/gi, '\\\\)').replace(/'/gi, '%27').replace(/ /gi, '%20')  || null;\n  }\n}\n","module.exports = \"<div class=\\\"l-page-header\\\">\\n  <div class=\\\"l-breadcrumbs\\\">\\n    <div class=\\\"l-breadcrumb\\\"><a [routerLink]=\\\"['/company']\\\">Главная</a></div>\\n    <div class=\\\"l-breadcrumb\\\"><a [routerLink]=\\\"[ getPathNews(), companyId]\\\">Новости</a></div>\\n    <div class=\\\"l-breadcrumb\\\" appNgslDotdotdot>{{ item.title }}</div>\\n  </div>\\n  <div class=\\\"title\\\">{{ item.title }}</div>\\n</div>\\n<div class=\\\"l-page\\\">\\n  <div class=\\\"l-page-inner\\\">\\n    <div class=\\\"l-page__content\\\">\\n      <div class=\\\"l-news-card\\\">\\n        <div class=\\\"body\\\">\\n          <div class=\\\"description\\\">\\n            <div class=\\\"date\\\">\\n              {{ item.newsPublicationDate | date: 'dd.MM.yyyy' }}\\n            </div>\\n            <div class=\\\"controls\\\">\\n              <div class=\\\"views\\\">{{ this.item.viewsCount || 0 }}</div>\\n              <div [ngClass]=\\\"{'likes': !hasLike(), 'likes-on': hasLike()}\\\" (click)=\\\"toggleLike()\\\">{{\\n                this.item.likesCount }}</div>\\n            </div>\\n            <div class=\\\"text\\\" [innerHTML]=\\\"item.newsBody\\\"></div>\\n          </div>\\n        </div>\\n        <div class=\\\"photo\\\" [ngStyle]=\\\"{'background-image': 'url(' + prepareLink(item.imageUrl) + ')'}\\\">\\n        </div>\\n        <div class=\\\"gallery\\\" *ngIf=\\\"item.attachmentFiles && item.attachmentFiles.length > 0\\\">\\n          <div class=\\\"title\\\"><span>Галерея</span></div>\\n          <div class=\\\"carousel\\\">\\n            <app-news-card-gallery [items]=\\\"item.attachmentFiles\\\"></app-news-card-gallery>\\n          </div>\\n        </div>\\n        <div class=\\\"button\\\">\\n          <a [routerLink]=\\\"[ getPathNews(), companyId]\\\" class=\\\"btn btn-to-back\\\">\\n            <i></i> К списку новостей\\n          </a>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <app-button-up></app-button-up>\\n</div>\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.l-breadcrumb:last-child {\\n  max-width: 450px;\\n  max-height: 16px; }\\n\\n.l-news-card {\\n  max-width: 1065px;\\n  padding-left: 25px;\\n  padding-top: 0;\\n  box-sizing: border-box; }\\n\\n.photo {\\n  display: inline-block;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-size: cover;\\n  width: 350px;\\n  height: 230px;\\n  position: relative;\\n  vertical-align: top; }\\n\\n.body {\\n  display: inline-block;\\n  width: calc(100% - 350px);\\n  padding-right: 30px;\\n  box-sizing: border-box; }\\n\\n.description {\\n  min-height: 250px; }\\n\\n.description .text {\\n    margin-bottom: 35px;\\n    color: #050505;\\n    font-size: 14px;\\n    line-height: 26px;\\n    line-height: 34px; }\\n\\n@media (min-width: 1440px) {\\n      .description .text {\\n        font-size: calc( 0.00833333 * 100vw + 2px);\\n        line-height: calc( 0.00833333 * 100vw + 14px); } }\\n\\n@media (min-width: 1920px) {\\n      .description .text {\\n        font-size: 18px;\\n        line-height: 30px; } }\\n\\n.description .date {\\n    font-size: 16px;\\n    font-family: Arial, Helvetica, sans-serif;\\n    margin-bottom: 15px;\\n    display: inline-block;\\n    text-transform: uppercase;\\n    color: #050505; }\\n\\n.description .controls {\\n    display: inline-block; }\\n\\n.description .controls .views,\\n    .description .controls .comments,\\n    .description .controls .likes,\\n    .description .controls .likes-on {\\n      display: inline-block;\\n      background-size: 25px 16px;\\n      background-repeat: no-repeat;\\n      background-position: left;\\n      padding-left: 35px;\\n      font-size: 16px;\\n      color: #000000;\\n      margin-left: 25px; }\\n\\n.description .controls .views {\\n      background-image: url(\\\"/assets/icons/icon-news-eye.svg\\\"); }\\n\\n.description .controls .likes {\\n      background-image: url(\\\"/assets/icons/icon-news-like-thin.svg\\\");\\n      cursor: pointer; }\\n\\n.description .controls .likes-on {\\n      background-image: url(\\\"/assets/icons/icon-news-like-on.svg\\\");\\n      cursor: pointer; }\\n\\n.gallery .title {\\n  position: relative;\\n  box-sizing: border-box;\\n  margin-bottom: 20px; }\\n\\n.gallery .title:before {\\n    position: absolute;\\n    content: '';\\n    display: block;\\n    left: 130px;\\n    right: 0;\\n    bottom: 0;\\n    height: 1px;\\n    background-color: #b7bab7; }\\n\\n.gallery .title span {\\n    font-size: 24px;\\n    line-height: 18px;\\n    color: #050505;\\n    font-weight: 600; }\\n\\n.button {\\n  margin: 30px 0; }\\n\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { News } from 'src/app/services/news/news';\nimport { NewsComment } from 'src/app/services/news-comments/newsComment';\nimport { NewsService } from 'src/app/services/news/news.service';\nimport { NewsCommentsService } from 'src/app/services/news-comments/news-comments.service';\nimport { NewsViewsService } from 'src/app/services/news-views/news-views.service';\nimport { groups } from 'src/app/constants/groups';\nimport { NewsView } from 'src/app/services/news-views/newsView';\n\n@Component({\n  selector: 'app-news-card-page',\n  templateUrl: './news-card-page.component.html',\n  styleUrls: ['./news-card-page.component.scss']\n})\nexport class NewsCardPageComponent implements OnInit {\n  public item: News;\n  public comments: NewsComment[];\n  public userId: number;\n  public isAdmin = false;\n  public companyId: string = null;\n\n  constructor(\n    private route: ActivatedRoute,\n    private newsService: NewsService,\n    private newsCommentsService: NewsCommentsService,\n    private newsViewsService: NewsViewsService\n  ) {}\n\n  ngOnInit() {\n    this.companyId = this.route.snapshot.params.id;\n    this.item = this.route.snapshot.data.newsCard;\n    this.userId = this.route.snapshot.data.userId;\n    const currentGroups: string[] = this.route.snapshot.data.groups;\n    if (currentGroups.indexOf(groups.administrator) >= 0) {\n      this.isAdmin = true;\n    }\n\n    this.getComments(this.item.id);\n\n    this.newsViewsService.getItems({filter: `slLookupNews/Id eq ${this.item.id}`})\n      .subscribe((views: NewsView[]) => {\n        if (views && views.length > 0) {\n          this.item.viewsCount = views[0].count;\n          if (views[0].userIds.every(id => id !== this.userId)) {\n            this.newsViewsService.addLike({id: views[0].id}).subscribe();\n          }\n        } else {\n          this.newsViewsService.createItem({\n            id: undefined,\n            title: this.item.title,\n            newsLookupId: this.item.id})\n            .subscribe(view => this.newsViewsService.addLike({id: view.id}).subscribe());\n        }\n      });\n  }\n\n  public getPathNews(): string {\n    return this.companyId === 'root' ? '/news' : '/enterprise/news';\n  }\n\n  createComment(comment: string) {\n    this.newsCommentsService.createItem({\n      id: undefined,\n      title: this.item.title,\n      newsLookupId: this.item.id,\n      comment: comment\n    }).subscribe(() => this.getComments(this.item.id));\n  }\n\n  editComment(comment: [number, string]) {\n    this.newsCommentsService.updateItem({\n      id: comment[0],\n      title: this.item.title,\n      newsLookupId: this.item.id,\n      comment: comment[1]\n    }).subscribe(() => this.getComments(this.item.id));\n  }\n\n  deleteComment(id: number) {\n    this.newsCommentsService.deleteItem({ id: id, title: ''})\n      .subscribe(() => this.getComments(this.item.id));\n  }\n\n  private getComments(newsId: number): void {\n    this.newsCommentsService.getItems({filter: `slLookupNews/Id eq ${this.item.id}`})\n      .subscribe((comments: NewsComment[]) => this.comments = comments);\n  }\n\n  public toggleLike(): void {\n    if (this.item.likedByIds.indexOf(this.userId) >= 0) {\n      this.newsService.removeLike({id: this.item.id}).subscribe();\n      this.item.likesCount--;\n      this.item.likedByIds = this.item.likedByIds.filter(l => l !== this.userId);\n    } else {\n      this.newsService.addLike({id: this.item.id}).subscribe();\n      this.item.likesCount++;\n      this.item.likedByIds.push(this.userId);\n    }\n  }\n\n  public hasLike(): boolean {\n    return this.item.likedByIds.indexOf(this.userId) >= 0;\n  }\n\n  public prepareLink(link: string) {\n    return link && link.replace(/\\(/gi, '\\\\(').replace(/\\)/gi, '\\\\)') || null;\n  }\n}\n","module.exports = \"<div class=\\\"l-page-header\\\">\\n  <div class=\\\"l-breadcrumbs\\\">\\n    <div class=\\\"l-breadcrumb\\\"><a [routerLink]=\\\"['/company']\\\">Главная</a></div>\\n    <div class=\\\"l-breadcrumb\\\">Новости</div>\\n  </div>\\n  <div class=\\\"title\\\">Новости</div>\\n</div>\\n<div class=\\\"l-page\\\">\\n  <div class=\\\"l-page-inner\\\">\\n    <div class=\\\"l-page__content\\\">\\n      <div class=\\\"l-news\\\">\\n        <div class=\\\"l-new-categories\\\">\\n          <app-filters>\\n            <app-filters-item (click)=\\\"filterByRubricId()\\\" [active]=\\\"this.rubricId == null\\\">\\n              Все\\n            </app-filters-item>\\n            <app-filters-item *ngFor=\\\"let rubric of rubrics\\\"\\n              (click)=\\\"filterByRubricId(rubric.id)\\\" [active]=\\\"this.rubricId == rubric.id\\\">\\n              {{ rubric.title === 'Событие' ? 'События' : rubric.title }}\\n            </app-filters-item>\\n          </app-filters>\\n        </div>\\n        <div class=\\\"l-news__item\\\" *ngFor=\\\"let item of news\\\">\\n          <div class=\\\"m-news-card\\\">\\n            <div class=\\\"admin-controls\\\">\\n              <app-admin-controls [item]=\\\"item\\\" (create)=\\\"create()\\\" (edit)=\\\"edit($event)\\\" (remove)=\\\"remove($event)\\\"></app-admin-controls>\\n            </div>\\n            <div class=\\\"thumb\\\" [routerLink]=\\\"[pathToNewsCard(item.id)]\\\" [ngStyle]=\\\"{'background-image': 'url(' + prepareLink(item.imageUrl) + ')'}\\\">\\n            </div>\\n            <div class=\\\"content\\\">\\n              <a class=\\\"title\\\" [routerLink]=\\\"[pathToNewsCard(item.id)]\\\" appNgslDotdotdot>{{ item.title }}</a>\\n              <div class=\\\"date\\\">{{ item.newsPublicationDateTitle }}</div>\\n              <div class=\\\"controls\\\">\\n                <div class=\\\"views\\\">{{ item.viewsCount }}</div>\\n                <div [ngClass]=\\\"{'likes': !hasLike(item), 'likes-on': hasLike(item)}\\\"\\n                     (click)=\\\"toggleLike(item)\\\">{{ item.likesCount }}</div>\\n              </div>\\n              <div class=\\\"text-news\\\" appNgslDotdotdot [innerHTML]=\\\"item.newsBody\\\"></div>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"l-news__navigation\\\">\\n          <input type=\\\"button\\\" value=\\\"В начало\\\" class=\\\"go-to-start\\\" (click)=\\\"hasPrev && filterNews()\\\" [class.disabled]=\\\"!hasPrev\\\" />\\n          <input type=\\\"button\\\" class=\\\"go-to-left\\\" (click)=\\\"getPrevNews()\\\" [class.disabled]=\\\"!hasPrev\\\" />\\n          <input type=\\\"button\\\" class=\\\"go-to-right\\\" (click)=\\\"getNextNews()\\\" [class.disabled]=\\\"!hasNext\\\" />\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.l-news {\\n  max-width: 1065px;\\n  padding: 50px 25px;\\n  box-sizing: border-box;\\n  position: relative; }\\n\\n.l-news .l-new-categories {\\n    height: 30px;\\n    position: absolute;\\n    top: -30px; }\\n\\n.l-news .l-news__navigation {\\n    margin-top: 80px;\\n    text-align: center; }\\n\\n.l-news .l-news__navigation .go-to-start,\\n    .l-news .l-news__navigation .go-to-left,\\n    .l-news .l-news__navigation .go-to-right {\\n      margin: 0;\\n      padding: 0;\\n      border: none;\\n      min-width: 0;\\n      vertical-align: middle;\\n      cursor: pointer; }\\n\\n.l-news .l-news__navigation .go-to-start {\\n      color: #768692;\\n      font-size: 18px;\\n      background: none;\\n      margin-right: 35px; }\\n\\n.l-news .l-news__navigation .go-to-left,\\n    .l-news .l-news__navigation .go-to-right {\\n      width: 50px;\\n      height: 50px;\\n      background-color: #768692;\\n      background-size: 27px 27px;\\n      background-repeat: no-repeat;\\n      background-position: center;\\n      background-image: url(/assets/icons/icon-arrow-right-white-thin.svg); }\\n\\n.l-news .l-news__navigation .go-to-left {\\n      -webkit-transform: rotate(180deg);\\n          -ms-transform: rotate(180deg);\\n              transform: rotate(180deg);\\n      margin-right: 25px; }\\n\\n.l-news .l-news__navigation .disabled {\\n      opacity: 0.4; }\\n\\n.l-news__item {\\n  margin-bottom: 50px; }\\n\\n.l-news__item:hover .admin-controls {\\n    display: block; }\\n\\n.l-news__item .admin-controls {\\n    display: none; }\\n\\n.m-news-card {\\n  padding-left: 340px;\\n  box-sizing: border-box;\\n  position: relative;\\n  min-height: 200px; }\\n\\n.m-news-card .thumb {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: 300px;\\n    height: 200px;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    background-size: cover;\\n    cursor: pointer; }\\n\\n.m-news-card .thumb:hover {\\n      opacity: 0.9; }\\n\\n.m-news-card .content .date {\\n    display: inline-block;\\n    font-size: 16px;\\n    color: #050505;\\n    margin-bottom: 10px;\\n    text-transform: uppercase; }\\n\\n.m-news-card .content .controls {\\n    display: inline-block;\\n    font-size: 16px;\\n    color: #050505;\\n    margin-left: 25px; }\\n\\n.m-news-card .content .controls .views,\\n    .m-news-card .content .controls .likes,\\n    .m-news-card .content .controls .likes-on {\\n      display: inline-block;\\n      background-repeat: no-repeat;\\n      background-position: left;\\n      padding-left: 35px; }\\n\\n.m-news-card .content .controls .views {\\n      background-image: url(/assets/icons/icon-news-eye-black.svg);\\n      background-size: 27px 15px;\\n      margin-right: 25px; }\\n\\n.m-news-card .content .controls .likes {\\n      background-image: url(/assets/icons/icon-news-like-thin.svg);\\n      background-size: 18px 18px;\\n      padding-left: 25px;\\n      cursor: pointer; }\\n\\n.m-news-card .content .controls .likes-on {\\n      background-image: url(\\\"/assets/icons/icon-like-red-on.svg\\\");\\n      background-size: 18px 18px;\\n      cursor: pointer; }\\n\\n.m-news-card .content .title {\\n    display: block;\\n    text-decoration: none;\\n    color: #050505;\\n    font-weight: bold;\\n    margin-bottom: 15px;\\n    font-size: 22px;\\n    line-height: 32px;\\n    max-height: 64px;\\n    overflow: hidden; }\\n\\n@media screen and (max-width: 1440px) {\\n      .m-news-card .content .title {\\n        font-size: 18px;\\n        line-height: 28px;\\n        max-height: 56px; } }\\n\\n.m-news-card .content .title:hover {\\n      color: #dd1e25; }\\n\\n.m-news-card .content .text-news {\\n    color: #050505;\\n    font-size: 16px;\\n    line-height: 30px;\\n    max-height: 120px;\\n    overflow: hidden; }\\n\\n@media screen and (max-width: 1440px) {\\n      .m-news-card .content .text-news {\\n        font-size: 14px;\\n        line-height: 28px;\\n        max-height: 112px; } }\\n\\n:host ::ng-deep .text-news p {\\n  margin: 0; }\\n\"","import { Component, OnInit, OnDestroy, NgZone } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { IListItemsPage } from 'src/app/services/list-items-service';\nimport { NewsRubric } from 'src/app/services/news-rubrics/news-rubric';\nimport { News } from 'src/app/services/news/news';\nimport { NewsService } from 'src/app/services/news/news.service';\nimport { NewsViewsService } from 'src/app/services/news-views/news-views.service';\nimport { NewsCommentsService } from 'src/app/services/news-comments/news-comments.service';\nimport { SharepointService } from 'src/app/services/sharepoint/sharepoint.service';\nimport { NewsComment } from 'src/app/services/news-comments/newsComment';\nimport { NewsView } from 'src/app/services/news-views/newsView';\nimport { Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Company } from 'src/app/services/companies/company';\n\n@Component({\n  selector: 'app-news-page',\n  templateUrl: './news-page.component.html',\n  styleUrls: ['./news-page.component.scss']\n})\nexport class NewsPageComponent implements OnInit, OnDestroy {\n  public rubrics: NewsRubric[] = [];\n  private top = 10;\n  private pages: IListItemsPage<News>[] = [];\n  private index = 0;\n  public news: News[] = [];\n  public hasPrev = false;\n  public hasNext = false;\n  public rubricId = null;\n  public userId: number = null;\n  private webId: string = null;\n  private company: Company = null;\n  private subscriptionWebId: Subscription = null;\n  private subscriptionCompany: Subscription = null;\n  private companyId: string = null;\n\n  constructor(\n    private newsService: NewsService,\n    private route: ActivatedRoute,\n    private newsViewsService: NewsViewsService,\n    private newsCommentsService: NewsCommentsService,\n    private sharepointService: SharepointService,\n    private router: Router,\n    private zone: NgZone\n  ) {\n    this.subscriptionWebId = this.route.data\n      .pipe(map(data => data.webId))\n      .subscribe(webId => {\n        this.webId = webId;\n      });\n  }\n\n  ngOnInit() {\n    console.log(\"NEWS ROUTE SNAPSHOT DATA\", this.route.snapshot.data);\n    this.companyId = this.route.snapshot.params.id;\n    this.userId = this.route.snapshot.data.userId;\n    this.rubricId = this.route.snapshot.params.rubricId;\n    this.rubrics = this.route.snapshot.data.newsRubrics;\n    this.pages.push(this.route.snapshot.data.news);\n    this.news = this.route.snapshot.data.news.items;\n    this.loadViewsAndComments(this.news);\n    this.hasNext = this.route.snapshot.data.news.hasNext;\n    this.subscriptionCompany = this.route.data\n      .pipe(map(data => data.company))\n      .subscribe(company => {\n        this.company = company;\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.subscriptionWebId != null) {\n      this.subscriptionWebId.unsubscribe();\n    }\n    if (this.subscriptionCompany != null) {\n      this.subscriptionCompany.unsubscribe();\n    }\n  }\n\n  public pathToNewsCard(newsId: number) {\n    return this.companyId === 'root' ? `/news/root/item/${newsId}` :\n    `/enterprise/news/${this.companyId}/item/${newsId}`;\n  }\n\n  public getNextNews(): void {\n    if (this.hasNext) {\n      if (this.index === this.pages.length - 1) {\n        this.pages[this.index]\n          .getNext()\n          .subscribe((page: IListItemsPage<News>) => {\n            this.index++;\n            this.news = page.items;\n            this.hasNext = page.hasNext;\n            this.hasPrev = true;\n            this.pages.push(page);\n            this.loadViewsAndComments(this.news);\n            this.scrollUp();\n          });\n      } else {\n        this.index++;\n        this.news = this.pages[this.index].items;\n        this.hasNext = this.pages[this.index].hasNext;\n        this.hasPrev = true;\n        this.scrollUp();\n      }\n    }\n  }\n\n  private scrollUp() {\n    this.zone.run(() => {\n      this.router.navigated = false;\n      document.getElementById('s4-workspace').scrollTop = 0;\n    });\n  }\n\n  public getPrevNews(): void {\n    if (this.hasPrev) {\n      this.index--;\n      this.news = this.pages[this.index].items;\n      this.hasNext = true;\n      this.hasPrev = this.index > 0;\n      this.scrollUp();\n    }\n  }\n\n  public filterByRubricId(id?: number) {\n    this.rubricId = id;\n    this.filterNews();\n  }\n\n  public filterNews() {\n    const filter =\n      (this.rubricId && `slNewsRubricLookup/Id eq ${this.rubricId} and `) || '';\n    this.index = 0;\n    this.news = [];\n    this.pages = [];\n    this.hasPrev = false;\n    this.hasNext = false;\n    this.newsService\n      .getItemsPaged({\n        webId: this.webId,\n        filter: `${filter}slNewsPublicationDate le datetime'${new Date().toISOString()}'`,\n        top: this.top\n      })\n      .subscribe((page: IListItemsPage<News>) => {\n        this.pages.push(page);\n        this.news = page.items;\n        this.hasNext = page.hasNext;\n        this.loadViewsAndComments(this.news);\n        this.scrollUp();\n      });\n  }\n\n  private loadViewsAndComments(news: News[]) {\n    let filter = '';\n    if (news.length > 0) {\n      for (const n of news) {\n        filter += `slLookupNews/Id eq ${n.id} or `;\n      }\n      filter = filter.slice(0, -4);\n      this.newsCommentsService\n        .getItems({ filter: filter, top: 5000 })\n        .subscribe((comments: NewsComment[]) => {\n          for (const n of this.news) {\n            n.commentsCount = comments.filter(\n              c => c.newsLookupId === n.id\n            ).length;\n          }\n        });\n      this.newsViewsService\n        .getItems({ filter: filter, top: 5000 })\n        .subscribe((views: NewsView[]) => {\n          for (const n of this.news) {\n            const view = views.filter(c => c.newsLookupId === n.id);\n            if (view && view.length > 0) {\n              n.viewsCount = view[0].count;\n            } else {\n              n.viewsCount = 0;\n            }\n          }\n        });\n    }\n  }\n\n  public toggleLike(item: News): void {\n    if (item.likedByIds.indexOf(this.userId) >= 0) {\n      this.newsService.removeLike({ id: item.id }).subscribe();\n      item.likedByIds = item.likedByIds.filter(l => l !== this.userId);\n      item.likesCount--;\n    } else {\n      this.newsService.addLike({ id: item.id }).subscribe();\n      item.likedByIds.push(this.userId);\n      item.likesCount++;\n    }\n  }\n\n  public hasLike(item: News): boolean {\n    return item.likedByIds.indexOf(this.userId) >= 0;\n  }\n\n  public prepareLink(link: string) {\n    return (link && link.replace(/\\(/gi, '\\\\(').replace(/\\)/gi, '\\\\)')) || null;\n  }\n\n  create() {\n    window.location.href =\n      this.sharepointService.getCurrentUserContext().webServerRelativeUrl +\n      `${this.company && this.company.url != null ? this.company.url : ''}/Lists/slNews/NewForm.aspx?Source=` +\n      encodeURIComponent(window.location.href);\n  }\n\n  edit(item: any) {\n    window.location.href =\n      this.sharepointService.getCurrentUserContext().webServerRelativeUrl +\n      `${this.company && this.company.url != null ? this.company.url : ''}/Lists/slNews/EditForm.aspx?ID=${item.id}&Source=` +\n      encodeURIComponent(window.location.href);\n  }\n\n  remove(item: any) {\n    this.newsService.recycleItem(item, this.webId).subscribe(() => this.filterByRubricId());\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NewsPageComponent } from './components/news-page/news-page.component';\nimport { NewsCardPageComponent } from './components/news-card-page/news-card-page.component';\nimport { NewsRubricsResolver } from 'src/app/services/news-rubrics/news-rubrics.resolver';\nimport { NewsResolver } from 'src/app/services/news/news.resolver';\nimport { NewsOfRubricResolver } from 'src/app/services/news/news-of-rubric.resolver';\nimport { CurrentUserIdResolver } from 'src/app/services/security/current-user-id.resolver';\nimport { NewsCardResolver } from 'src/app/services/news/news-card.resolver';\nimport { GroupsResolver } from 'src/app/services/security/groups.resolver';\nimport { CompanyWebResolver } from 'src/app/services/companies/company-web.resolver';\nimport { CompanyResolver } from 'src/app/services/companies/company.resolver';\n\n\nconst routes: Routes = [\n  {\n    path: ':id',\n    component: NewsPageComponent,\n    resolve: {\n      webId: CompanyWebResolver,\n      news: NewsResolver,\n      newsRubrics: NewsRubricsResolver,\n      userId: CurrentUserIdResolver,\n      company: CompanyResolver\n    },\n    data: { animation: 'fadeAnimation', title: 'Новости' }\n  },\n  {\n    path: ':id/item/:itemId',\n    component: NewsCardPageComponent,\n    resolve: {\n      newsCard: NewsCardResolver,\n      userId: CurrentUserIdResolver,\n      groups: GroupsResolver\n    },\n    data: { animation: 'fadeAnimation', title: 'Новости' }\n  },\n  {\n    path: ':id/rubric/:rubricId',\n    component: NewsPageComponent,\n    resolve: {\n      webId: CompanyWebResolver,\n      news: NewsOfRubricResolver,\n      newsRubrics: NewsRubricsResolver,\n      userId: CurrentUserIdResolver,\n      company: CompanyResolver\n    },\n    data: { animation: 'fadeAnimation', title: 'События' }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  providers: [\n    NewsResolver,\n    NewsOfRubricResolver,\n    NewsRubricsResolver,\n    CurrentUserIdResolver,\n    GroupsResolver,\n    NewsCardResolver,\n    CompanyWebResolver,\n    CompanyResolver\n  ],\n  exports: [RouterModule]\n})\nexport class NewsRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { NewsRoutingModule } from './news-routing.module';\nimport { SharedModule } from '../shared/shared.module';\n\nimport { NewsCardGalleryComponent } from './components/news-card-gallery/news-card-gallery.component';\nimport { NewsCardPageComponent } from './components/news-card-page/news-card-page.component';\nimport { NewsPageComponent } from './components/news-page/news-page.component';\n\n@NgModule({\n  declarations: [\n    NewsCardGalleryComponent,\n    NewsCardPageComponent,\n    NewsPageComponent\n  ],\n  imports: [\n    CommonModule,\n    NewsRoutingModule,\n    SharedModule,\n    FormsModule,\n    RouterModule\n  ],\n  exports: [\n    NewsCardGalleryComponent\n  ]\n})\nexport class NewsModule { }\n","import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { map, flatMap } from 'rxjs/operators';\n\nimport { Company } from './company';\nimport { CompaniesService } from './companies.service';\nimport { SharepointService } from '../sharepoint/sharepoint.service';\n\n@Injectable()\nexport class CompanyWebResolver implements Resolve<string>  {\n  constructor(private companiesService: CompaniesService, private sharepointService: SharepointService) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<string> {\n    const id = route.params.id;\n    if (id === 'root') {\n      return undefined;\n    } else {\n      return this.companiesService.getItems({ filter: `Id eq '${id}'`})\n        .pipe(map((c: Company[]) =>  c.length > 0 ? c[0] : null ),\n        flatMap((c: Company) => this.sharepointService.getWebIdByRelativeUrl(c && c.url)));\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\nimport { Company } from './company';\nimport { CompaniesService } from './companies.service';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class CompanyResolver implements Resolve<Company>  {\n  constructor(private companiesService: CompaniesService) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<Company> {\n    const id: number = route.params.id;\n    return this.companiesService.getItems({ filter: `Id eq '${id}'`})\n      .pipe(map((c: Company[]) =>  c.length > 0 ? c[0] : null ));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  Resolve,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot\n} from '@angular/router';\n\nimport { NewsRubric } from './news-rubric';\nimport { NewsRubricsService } from './news-rubrics.service';\nimport { Observable } from 'rxjs';\nimport { CompaniesService } from '../companies/companies.service';\nimport { flatMap } from 'rxjs/operators';\n\n@Injectable()\nexport class NewsRubricsResolver implements Resolve<NewsRubric[]> {\n  constructor(\n    private newsRubricsService: NewsRubricsService,\n    private companiesService: CompaniesService\n  ) {}\n\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<NewsRubric[]> {\n    return this.companiesService.getWebIdByCompanyId(route.params.id).pipe(\n      flatMap(id => {\n        return this.newsRubricsService.getItems({ webId: id });\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  Resolve,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot\n} from '@angular/router';\n\nimport { News } from './news';\nimport { NewsService } from './news.service';\nimport { Observable } from 'rxjs';\nimport { CompaniesService } from '../companies/companies.service';\nimport { flatMap } from 'rxjs/operators';\n\n@Injectable()\nexport class NewsCardResolver implements Resolve<News> {\n  constructor(\n    private newsService: NewsService,\n    private companiesService: CompaniesService\n  ) {}\n\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<News> {\n    const id: number = route.params.itemId;\n    return this.companiesService.getWebIdByCompanyId(route.params.id).pipe(\n      flatMap(_webId => {\n        return this.newsService.getItem({ id: id, webId: _webId });\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  Resolve,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot\n} from '@angular/router';\n\nimport { News } from './news';\nimport { NewsService } from './news.service';\nimport { Observable } from 'rxjs';\nimport { IListItemsPage } from '../list-items-service';\nimport { CompaniesService } from '../companies/companies.service';\nimport { flatMap } from 'rxjs/operators';\n\n@Injectable()\nexport class NewsOfRubricResolver implements Resolve<IListItemsPage<News>> {\n  constructor(\n    private newsService: NewsService,\n    private companiesService: CompaniesService\n  ) {}\n\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<IListItemsPage<News>> {\n    const rubricId = route.params.rubricId;\n    return this.companiesService.getWebIdByCompanyId(route.params.id).pipe(\n      flatMap(id => {\n        return this.newsService.getItemsPaged({\n          webId: id,\n          filter: `slNewsPublicationDate le datetime'${new Date().toISOString()}' and slNewsRubricLookup/Id eq ${rubricId}`\n        });\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  Resolve,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot\n} from '@angular/router';\n\nimport { News } from './news';\nimport { NewsService } from './news.service';\nimport { Observable } from 'rxjs';\nimport { IListItemsPage } from '../list-items-service';\nimport { CompaniesService } from '../companies/companies.service';\nimport { flatMap, map } from 'rxjs/operators';\n\n@Injectable()\nexport class NewsResolver implements Resolve<IListItemsPage<News>> {\n  constructor(\n    private newsService: NewsService,\n    private companiesService: CompaniesService\n  ) {}\n\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<IListItemsPage<News>> {\n    return this.companiesService.getWebIdByCompanyId(route.params.id).pipe(\n      flatMap(id => {\n        return this.newsService.getItemsPaged({\n          webId: id,\n          filter: `slNewsPublicationDate le datetime'${new Date().toISOString()}'`\n        });\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable, from, of } from 'rxjs';\n\nimport { SharepointService } from '../sharepoint/sharepoint.service';\n\n@Injectable()\nexport class CurrentUserIdResolver implements Resolve<number> {\n\n  constructor(private sharepointService: SharepointService) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<number> {\n    return of(this.sharepointService.getCurrentUserContext().userId);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { SecurityService } from './security.service';\n\n@Injectable()\nexport class GroupsResolver implements Resolve<string[]> {\n\n  constructor(private securityService: SecurityService) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<string[]> {\n    return this.securityService.getCurrentUserGroups();\n  }\n}\n"],"sourceRoot":""}