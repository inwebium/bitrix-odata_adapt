{"version":3,"sources":["webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.html","webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.scss","webpack:///./src/app/orgstructure/components/orgstructure-page/orgstructure-page.component.ts","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.html","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.scss","webpack:///./src/app/orgstructure/components/orgstructure-tree/orgstructure-tree.component.ts","webpack:///./src/app/orgstructure/orgstructure-routing.module.ts","webpack:///./src/app/orgstructure/orgstructure.module.ts","webpack:///./src/app/services/trees/trees.service.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["module.exports = \"<div class=\\\"l-page-header\\\">\\r\\n  <div class=\\\"l-breadcrumbs\\\">\\r\\n    <div class=\\\"l-breadcrumb\\\"><a [routerLink]=\\\"['/company']\\\">Главная</a></div>\\r\\n    <div class=\\\"l-breadcrumb\\\">Структура компании</div>\\r\\n  </div>\\r\\n  <div class=\\\"title\\\">Структура компании</div>\\r\\n</div>\\r\\n<div class=\\\"l-page\\\">\\r\\n  <div class=\\\"l-page-inner\\\">\\r\\n    <div class=\\\"l-page__content\\\">\\r\\n      <div class=\\\"l-orgstructure\\\">\\r\\n        <div class=\\\"l-orgstructure__inner\\\">\\r\\n          <app-orgstructure-tree [trees]=\\\"trees\\\"></app-orgstructure-tree>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \".l-orgstructure {\\n  text-align: center;\\n  background-color: #fff;\\n  padding: 25px;\\n  box-sizing: border-box; }\\n\\n.l-orgstructure__inner {\\n  display: inline-block;\\n  max-width: 1350px; }\\n\"","import {\r\n  Component, OnInit\r\n} from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\nimport { SidebarService } from 'src/app/services/sidebar/sidebar.service';\r\nimport { TreesService, TreeNode } from 'src/app/services/trees/trees.service';\r\nimport { Department } from 'src/app/services/departments/department';\r\n\r\n@Component({\r\n  selector: 'app-orgstructure-page',\r\n  templateUrl: './orgstructure-page.component.html',\r\n  styleUrls: ['./orgstructure-page.component.scss']\r\n})\r\nexport class OrgstructurePageComponent implements OnInit {\r\n\r\n  public showSidebar: Boolean = false;\r\n\r\n  public trees: TreeNode<Department>[] = [];\r\n\r\n  constructor(private sidebarService: SidebarService, private route: ActivatedRoute, private treesService: TreesService) {\r\n    this.sidebarService.handleSetSettings({showSidebar: false, bgColor: '#fff'});\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.trees\r\n      = this.treesService.getTreeOfArray(this.route.snapshot.data.departments);\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"item\\\" *ngFor=\\\"let item of trees\\\" #structureItem>\\r\\n  <div class=\\\"parent\\\">\\r\\n    <div class=\\\"title\\\" (click)=\\\"toggleItemTree(structureItem, item.value)\\\">\\r\\n      <div class=\\\"text\\\">\\r\\n        <span>{{ item.value.title }}</span>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"leader\\\">\\r\\n      <div class=\\\"inner\\\">\\r\\n        <div class=\\\"photo\\\">\\r\\n          <app-user-thumb [photo]=\\\"item.value.lookupManagerPhoto\\\"\\r\\n          [route]=\\\"item.value.profileManagerRoute\\\"\\r\\n          [active]=\\\"item.value.lookupManagerReason == null || item.value.lookupManagerReason === ''\\\"></app-user-thumb>\\r\\n        </div>\\r\\n        <div class=\\\"info\\\">\\r\\n          <div class=\\\"full-name\\\">{{ item.value.lookupManagerFullName }}</div>\\r\\n          <div class=\\\"position\\\">{{ item.value.lookupManagerPosition }}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"structure\\\">\\r\\n      <div class=\\\"m-department-structure\\\">\\r\\n        <a class=\\\"employees\\\" *ngIf=\\\"item.value.employeeCount\\\" #employeesRef (click)=\\\"toggleEmployees($event, employeesRef, item.value)\\\">\\r\\n          <div class=\\\"text\\\">\\r\\n            {{ item.value.employeeCount }} {{ units(item.value.employeeCount, casesEmployee) }}\\r\\n          </div>\\r\\n          <div class=\\\"list-employees\\\" #list (click)=\\\"$event.stopPropagation()\\\">\\r\\n            <input type=\\\"button\\\" (click)=\\\"toggleEmployees($event, employeesRef, item.value)\\\" />\\r\\n            <div class=\\\"list\\\">\\r\\n              <div class=\\\"item-employee\\\" *ngFor=\\\"let employee of employees\\\">\\r\\n                <div class=\\\"photo\\\">\\r\\n                  <app-user-thumb [width]=\\\"'35px'\\\" [height]=\\\"'35px'\\\"\\r\\n                  [photo]=\\\"employee.photo\\\" [route]=\\\"employee.profileRoute\\\"\\r\\n                  [active]=\\\"employee.reason == null || employee.reason === ''\\\"></app-user-thumb>\\r\\n                </div>\\r\\n                <div class=\\\"full-name\\\">{{ employee.fullName }}</div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </a>\\r\\n        <a *ngIf=\\\"item.childrens && item.childrens.length > 0\\\" class=\\\"divisions\\\" (click)=\\\"toggleItemTree(structureItem, item.value)\\\">\\r\\n          {{ item.childrens.length }} {{ units(item.childrens.length, casesDivisions) }}\\r\\n        </a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"child\\\" *ngIf=\\\"item.childrens\\\">\\r\\n    <app-orgstructure-tree #recurciveElement [trees]=\\\"item.childrens\\\"></app-orgstructure-tree>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.item {\\n  vertical-align: top;\\n  display: inline-block;\\n  margin: 15px 7px; }\\n\\n.item.is-hidden {\\n    display: none; }\\n\\n.item.is-hidden.is-expanded {\\n      display: inline-block; }\\n\\n.item .parent {\\n    display: inline-block;\\n    position: relative;\\n    width: 295px;\\n    height: auto;\\n    text-align: left;\\n    box-sizing: border-box; }\\n\\n.item .parent .title {\\n      cursor: pointer;\\n      display: table;\\n      table-layout: fixed;\\n      width: 100%;\\n      border-collapse: collapse;\\n      box-sizing: border-box;\\n      text-align: center;\\n      height: 48px;\\n      background-color: #A62F2A;\\n      color: #FFFFFF; }\\n\\n.item .parent .title .text {\\n        box-sizing: border-box;\\n        padding: 0 15px;\\n        display: table-cell;\\n        vertical-align: middle;\\n        height: 72px; }\\n\\n.item .parent .title .text span {\\n          display: inline-block;\\n          display: -webkit-box;\\n          display: block;\\n          text-overflow: ellipsis;\\n          -webkit-line-clamp: 1;\\n          overflow: hidden;\\n          max-height: 24px;\\n          font-weight: 400;\\n          font-size: 18px; }\\n\\n.item .parent .leader {\\n      padding: 12px;\\n      height: 96px;\\n      background-color: #EFEFF0;\\n      box-sizing: border-box; }\\n\\n.item .parent .leader .inner {\\n        display: table;\\n        table-layout: fixed;\\n        width: 100%;\\n        border-collapse: collapse; }\\n\\n.item .parent .leader .inner .photo,\\n        .item .parent .leader .inner .info {\\n          display: table-cell;\\n          vertical-align: middle;\\n          box-sizing: border-box;\\n          width: auto; }\\n\\n.item .parent .leader .inner .photo {\\n          width: 60px;\\n          text-align: center; }\\n\\n.item .parent .leader .inner .info {\\n          padding-left: 10px; }\\n\\n.item .parent .leader .inner .info .full-name {\\n            font-size: 14px;\\n            color: #A62F2A;\\n            display: -webkit-box;\\n            display: block;\\n            text-overflow: ellipsis;\\n            -webkit-line-clamp: 2;\\n            overflow: hidden;\\n            max-height: 38px; }\\n\\n.item .parent .leader .inner .info .position {\\n            font-size: 10px;\\n            line-height: 12px;\\n            display: -webkit-box;\\n            -webkit-line-clamp: 1;\\n            overflow: hidden; }\\n\\n.item .parent .structure {\\n      position: absolute;\\n      height: 32px;\\n      padding: 0px 15px;\\n      box-sizing: border-box;\\n      line-height: 32px;\\n      bottom: -15px;\\n      text-align: center;\\n      width: 100%;\\n      -ms-flex-line-pack: center;\\n          align-content: center;\\n      font-size: 0; }\\n\\n.item .parent .structure .employees,\\n      .item .parent .structure .divisions {\\n        display: inline-block;\\n        padding: 0px 10px;\\n        font-size: 14px;\\n        color: #FFFFFF;\\n        text-decoration: none;\\n        max-width: 148px;\\n        min-width: 40%; }\\n\\n.item .parent .structure .employees {\\n        background-color: #A62F2A;\\n        position: relative;\\n        cursor: pointer; }\\n\\n.item .parent .structure .employees.is-expanded .list-employees {\\n          display: block; }\\n\\n.item .parent .structure .employees .list-employees {\\n          display: none;\\n          position: absolute;\\n          top: 40px;\\n          left: 0;\\n          padding: 10px 5px;\\n          padding-top: 15px;\\n          box-sizing: border-box;\\n          background-color: #a82e25;\\n          width: 240px;\\n          z-index: 10; }\\n\\n.item .parent .structure .employees .list-employees input[type=\\\"button\\\"] {\\n            padding: 0;\\n            margin: 0;\\n            border: 0;\\n            min-width: 0;\\n            background-color: transparent;\\n            cursor: pointer;\\n            width: 30px;\\n            height: 30px;\\n            border-radius: 100%;\\n            position: absolute;\\n            top: -10px;\\n            right: -10px;\\n            z-index: 15;\\n            background-color: #a82e25;\\n            box-shadow: 0 0px 0px 2px #d8d8d8;\\n            background-repeat: no-repeat;\\n            background-position: center;\\n            background-size: 100%;\\n            background-image: url(\\\"/local/js/assets/icons/icon-close-white.svg\\\"); }\\n\\n.item .parent .structure .employees .list-employees input[type=\\\"button\\\"]:focus {\\n              outline: none; }\\n\\n.item .parent .structure .employees .list-employees .list {\\n            max-height: 200px;\\n            overflow-y: auto; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee {\\n              display: table;\\n              table-layout: fixed;\\n              border-collapse: collapse;\\n              width: 100%; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee + .item-employee {\\n                margin-top: 5px; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .photo,\\n              .item .parent .structure .employees .list-employees .list .item-employee .full-name {\\n                display: table-cell;\\n                vertical-align: middle;\\n                box-sizing: border-box;\\n                width: auto; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .photo {\\n                width: 50px;\\n                text-align: center; }\\n\\n.item .parent .structure .employees .list-employees .list .item-employee .full-name {\\n                padding-left: 10px;\\n                text-align: left;\\n                line-height: 16px;\\n                font-size: 14px; }\\n\\n.item .parent .structure .divisions {\\n        background-color: #D8D8D8;\\n        color: #050505;\\n        cursor: pointer; }\\n\\n.child {\\n  display: none;\\n  margin-top: 15px; }\\n\\n.is-expanded > .child {\\n    display: block; }\\n\\n.is-expanded > .child .parent > .title {\\n      height: 96px;\\n      background-color: #EFEFF0;\\n      color: #000; }\\n\\n.is-expanded > .child .parent > .title span {\\n        display: -webkit-box;\\n        display: block;\\n        text-overflow: ellipsis;\\n        -webkit-line-clamp: 3;\\n        overflow: hidden;\\n        max-height: 72px; }\\n\\n.is-expanded > .child .parent > .leader {\\n      background-color: #D8D8D8; }\\n\\n.is-expanded > .child .parent > .structure .divisions {\\n      background-color: #EFEFF0; }\\n\"","import {\r\n  Component, OnInit, Input, ViewChildren, ElementRef, QueryList, AfterViewInit, ViewChild, HostListener, Inject\r\n} from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\nimport { TreeNode } from 'src/app/services/trees/trees.service';\r\nimport { Department } from 'src/app/services/departments/department';\r\nimport { Employee } from 'src/app/services/employees/employee';\r\nimport { EmployeesService } from 'src/app/services/employees/employees.service';\r\n\r\nexport interface Cases {\r\n  nom: string;\r\n  gen: string;\r\n  plu: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-orgstructure-tree',\r\n  templateUrl: './orgstructure-tree.component.html',\r\n  styleUrls: ['./orgstructure-tree.component.scss']\r\n})\r\nexport class OrgstructureTreeComponent implements AfterViewInit, OnInit {\r\n  @ViewChildren('structureItem', { read: ElementRef })\r\n  structureItems: QueryList<ElementRef>;\r\n  @ViewChild('list') list: ElementRef;\r\n  @ViewChild('employeesRef') employeesRef: ElementRef;\r\n\r\n  @ViewChildren('recurciveElement', { read: OrgstructureTreeComponent })\r\n  treeElements: QueryList<OrgstructureTreeComponent>;\r\n\r\n  parentElement: OrgstructureTreeComponent = null;\r\n\r\n  casesEmployee: Cases = {\r\n    nom: 'сотрудник',\r\n    gen: 'сотрудника',\r\n    plu: 'сотрудников'\r\n  };\r\n\r\n  casesDivisions: Cases = {\r\n    nom: 'подразделение',\r\n    gen: 'подразделения',\r\n    plu: 'подразделений'\r\n  };\r\n\r\n  @Input() trees: TreeNode<Department>[] = [];\r\n\r\n  employees: Employee[] = [];\r\n\r\n  constructor(private employeesService: EmployeesService,\r\n   @Inject(DOCUMENT) private document: Document) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  @HostListener('document:click', ['$event.target'])\r\n  public onClick(targetElement) {\r\n    if (this.list && !this.list.nativeElement.contains(targetElement)) {\r\n      this.employeesRef.nativeElement.classList.remove('is-expanded');\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.treeElements.forEach(element => {\r\n      element.parentElement = this;\r\n    });\r\n  }\r\n\r\n  public toggleEmployees(event, domRef: HTMLElement, department: Department) {\r\n    if (domRef.classList.contains('is-expanded') === false) {\r\n      const elements = Array.from(document.querySelectorAll('.employees'));\r\n      elements.forEach( e => {\r\n        if (e.classList.contains('is-expanded')) {\r\n          e.classList.toggle('is-expanded');\r\n        }\r\n      });\r\n      this.employeesService\r\n        .getItems({ filter: `slLookupDepartment/Id eq ${department.id}`, top: 5000 })\r\n        .subscribe((employees: Employee[]) => {\r\n          domRef.classList.toggle('is-expanded');\r\n          this.employees = employees;\r\n        });\r\n    } else {\r\n      domRef.classList.toggle('is-expanded');\r\n    }\r\n  }\r\n\r\n  public toggleItemTree(structureItem: HTMLElement, hasChild: Department) {\r\n    if (hasChild) {\r\n      structureItem.classList.toggle('is-expanded');\r\n      this.structureItems.toArray().forEach(element => {\r\n        element.nativeElement.classList.toggle('is-hidden');\r\n      });\r\n      this.treeElements.toArray().forEach(element => {\r\n        element.structureItems.toArray().forEach(e => {\r\n          if (e.nativeElement.classList.contains('is-hidden')) {\r\n            e.nativeElement.classList.toggle('is-hidden');\r\n          }\r\n          if (e.nativeElement.classList.contains('is-expanded')) {\r\n            e.nativeElement.classList.toggle('is-expanded');\r\n          }\r\n        });\r\n        element.treeElements.toArray().forEach(e => {\r\n          this.hideItemTree(e);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  public units(num: number, cases: Cases): string {\r\n    num = Math.abs(num);\r\n    let word = '';\r\n    if (num.toString().indexOf('.') > -1) {\r\n      word = cases.gen;\r\n    } else {\r\n      word =\r\n        num % 10 === 1 && num % 100 !== 11\r\n          ? cases.nom\r\n          : num % 10 >= 2 &&\r\n            num % 10 <= 4 &&\r\n            (num % 100 < 10 || num % 100 >= 20)\r\n          ? cases.gen\r\n          : cases.plu;\r\n    }\r\n    return word;\r\n  }\r\n\r\n  private hideItemTree(item: OrgstructureTreeComponent) {\r\n    item.structureItems.toArray().forEach(element => {\r\n      if (!element.nativeElement.classList.contains('is-hidden')) {\r\n        element.nativeElement.classList.toggle('is-hidden');\r\n      }\r\n      if (element.nativeElement.classList.contains('is-expanded')) {\r\n        element.nativeElement.classList.toggle('is-expanded');\r\n      }\r\n    });\r\n    item.treeElements.forEach(element => {\r\n      this.hideItemTree(element);\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OrgstructurePageComponent } from './components/orgstructure-page/orgstructure-page.component';\nimport { DepartmentsResolver } from 'src/app/services/departments/departments.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrgstructurePageComponent,\n    resolve: { departments: DepartmentsResolver },\n    data: { animation: 'fadeAnimation', title: 'Оргструктура' }\n  }\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    providers: [DepartmentsResolver],\n    exports: [RouterModule]\n})\nexport class OrgstructureRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\n\nimport { SharedModule } from '../shared/shared.module';\n\nimport { OrgstructurePageComponent } from './components/orgstructure-page/orgstructure-page.component';\nimport { OrgstructureTreeComponent } from './components/orgstructure-tree/orgstructure-tree.component';\nimport { OrgstructureRoutingModule } from './orgstructure-routing.module';\n\n@NgModule({\n  declarations: [\n    OrgstructurePageComponent,\n    OrgstructureTreeComponent\n  ],\n  imports: [\n    RouterModule,\n    CommonModule,\n    OrgstructureRoutingModule,\n    SharedModule,\n    FormsModule\n  ]\n})\nexport class OrgstructureModule { }\n","import { Injectable } from '@angular/core';\n\nexport interface TreeNodeValue {\n  id: number;\n  title: string;\n  parentId?: number;\n}\n\nexport interface TreeNode<T extends TreeNodeValue> {\n  value: T;\n  childrens: TreeNode<T>[];\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TreesService {\n\n  constructor() { }\n\n  public getTreeOfArray<T extends TreeNodeValue>(items: T[]): TreeNode<T>[] {\n    const nodes: TreeNode<T>[] = [];\n    const map = {};\n    const roots: TreeNode<T>[] = [];\n    for (let i = 0; i < items.length; i += 1) {\n      const node: TreeNode<T> = { value: items[i], childrens: [] };\n      map[node.value.id] = i;\n      nodes.push(node);\n    }\n    for (let i = 0; i < nodes.length; i += 1) {\n      const node = nodes[i];\n      if (node.value.parentId != null) {\n        nodes[map[node.value.parentId]].childrens.push(node);\n      } else {\n        roots.push(node);\n      }\n    }\n    return roots;\n  }\n}\n"],"sourceRoot":""}