{"version":3,"sources":["webpack:///./src/app/new-employees/components/new-employees-page/new-employees-page.component.html","webpack:///./src/app/new-employees/components/new-employees-page/new-employees-page.component.scss","webpack:///./src/app/new-employees/components/new-employees-page/new-employees-page.component.ts","webpack:///./src/app/new-employees/new-employees-routing.module.ts","webpack:///./src/app/new-employees/new-employees.module.ts","webpack:///./src/app/new-employees/services/employees/new-employees-page.resolver.ts"],"names":[],"mappings":"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","file":"new-employees-new-employees-module.js","sourcesContent":["module.exports = \"<div class=\\\"l-page-header\\\">\\n    <div class=\\\"l-breadcrumbs\\\">\\n      <div class=\\\"l-breadcrumb\\\"><a [routerLink]=\\\"['/company']\\\">Главная</a></div>\\n      <div class=\\\"l-breadcrumb\\\">Новые сотрудники</div>\\n    </div>\\n    <div class=\\\"title\\\">Новые сотрудники</div>\\n  </div>\\n  <div class=\\\"l-page\\\">\\n    <div class=\\\"l-page-inner\\\">\\n      <div class=\\\"l-page__content\\\">\\n        <div class=\\\"l-birthdays\\\">\\n          <div class=\\\"l-birthdays__month-list\\\">\\n            <app-filters>\\n              <app-filters-item [active]=\\\"month === i ? true : false\\\" *ngFor=\\\"let item of months; let i = index\\\" (change)=\\\"getBirthdaysPagetByMonth(i)\\\">\\n                {{ item }}\\n              </app-filters-item>\\n            </app-filters>\\n          </div>\\n          <div class=\\\"l-birthdays__calendar\\\">\\n            <div class=\\\"l-birthdays__day\\\" *ngFor=\\\"let item of birthdays\\\">\\n              <div class=\\\"date\\\">\\n                <div class=\\\"day\\\">{{ item.birthday }}</div>\\n                <div class=\\\"month\\\">{{ item.birthmonth }}</div>\\n              </div>\\n              <div class=\\\"employees\\\">\\n                <div class=\\\"m-employees-list\\\">\\n                  <div class=\\\"m-employees-list__item\\\" *ngFor=\\\"let employee of item.employees\\\">\\n                    <div class=\\\"avatar\\\">\\n                      <app-user-thumb [width]=\\\"'90px'\\\" [height]=\\\"'90px'\\\" [photo]=\\\"employee.photo\\\" [route]=\\\"employee.profileRoute\\\"></app-user-thumb>\\n                    </div>\\n                    <div class=\\\"body\\\">\\n                      <div class=\\\"name\\\">\\n                        {{ employee.fullName }}\\n                      </div>\\n                      <div class=\\\"position\\\">{{ employee.positionName }}</div>\\n                    </div>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n          <div class=\\\"navigation\\\" *ngIf=\\\"hasPrev || hasNext\\\">\\n            <div class=\\\"m-page-nav\\\">\\n              <a class=\\\"to-begin\\\" (click)=\\\"hasPrev && getBirthdaysPagetByMonth()\\\" [class.disabled]=\\\"!hasPrev\\\">В начало</a>\\n              <input type=\\\"button\\\" class=\\\"prev-page\\\" (click)=\\\"getPrev()\\\" [class.disabled]=\\\"!hasPrev\\\" />\\n              <input type=\\\"button\\\" class=\\\"next-page\\\" (click)=\\\"getNext()\\\" [class.disabled]=\\\"!hasNext\\\" />\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\"","module.exports = \"#s4-bodyContainer {\\n  padding: 0; }\\n\\n@-webkit-keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n@keyframes shine-avatar {\\n  0% {\\n    background-position: -30px; }\\n  40%,\\n  100% {\\n    background-position: 210px; } }\\n\\n.l-birthdays {\\n  box-sizing: border-box;\\n  padding-left: 25px; }\\n\\n.l-birthdays .l-birthdays__month-list {\\n    text-align: center;\\n    box-sizing: border-box;\\n    margin-bottom: 60px;\\n    height: 30px;\\n    text-align: center; }\\n\\n.l-birthdays .l-birthdays__calendar {\\n    border-left: 2px solid #FAFAFA; }\\n\\n.l-birthdays .l-birthdays__calendar .l-birthdays__day {\\n      box-sizing: border-box;\\n      padding-left: 10%;\\n      position: relative;\\n      border-top: 2px dotted #898888; }\\n\\n.l-birthdays .l-birthdays__calendar .l-birthdays__day .date {\\n        position: absolute;\\n        left: -27px;\\n        top: -27px; }\\n\\n.l-birthdays .l-birthdays__calendar .l-birthdays__day .date .day,\\n        .l-birthdays .l-birthdays__calendar .l-birthdays__day .date .month {\\n          display: inline-block;\\n          vertical-align: middle; }\\n\\n.l-birthdays .l-birthdays__calendar .l-birthdays__day .day {\\n        background-color: #FAFAFA;\\n        border-radius: 100%;\\n        width: 50px;\\n        height: 50px;\\n        line-height: 50px;\\n        color: #050505;\\n        font-size: 20px;\\n        font-weight: 900;\\n        box-sizing: border-box;\\n        text-align: center; }\\n\\n.l-birthdays .l-birthdays__calendar .l-birthdays__day .month {\\n        color: #404041;\\n        font-size: 16px;\\n        padding-right: 15px;\\n        box-sizing: border-box;\\n        padding-left: 12px;\\n        background-color: #fff;\\n        text-transform: capitalize; }\\n\\n.l-birthdays .l-birthdays__calendar .l-birthdays__day:first-of-type {\\n        border-top: 0; }\\n\\n.navigation {\\n  margin: 35px 0;\\n  text-align: center; }\\n\\n.m-employees-list .m-employees-list__item {\\n  display: table;\\n  width: 100%; }\\n\\n.m-employees-list .m-employees-list__item .avatar {\\n    display: table-cell;\\n    padding-right: 23px;\\n    padding-left: 34px;\\n    padding-bottom: 14px;\\n    padding-top: 14px;\\n    box-sizing: border-box;\\n    vertical-align: middle;\\n    width: 90px; }\\n\\n.m-employees-list .m-employees-list__item .body {\\n    vertical-align: middle;\\n    display: table-cell; }\\n\\n.m-employees-list .m-employees-list__item .body .name {\\n      color: #050505;\\n      font-size: 22px;\\n      line-height: 24px; }\\n\\n.m-employees-list .m-employees-list__item .body .position {\\n      color: #050505;\\n      font-size: 16px;\\n      line-height: 20px; }\\n\\n.m-employees-list .m-employees-list__item .controls {\\n    display: none;\\n    vertical-align: middle;\\n    box-sizing: border-box;\\n    padding-left: 25px;\\n    vertical-align: middle; }\\n\\n.m-employees-list .m-employees-list__item .controls .profile,\\n    .m-employees-list .m-employees-list__item .controls .mail,\\n    .m-employees-list .m-employees-list__item .controls .structure {\\n      display: inline-block;\\n      border-radius: 100%;\\n      background-color: #FFFFFF;\\n      width: 50px;\\n      height: 50px;\\n      margin-right: 25px;\\n      background-position: center;\\n      background-repeat: no-repeat;\\n      background-size: 26px 26px; }\\n\\n.m-employees-list .m-employees-list__item .controls .profile {\\n      background-image: url(\\\"/assets/icons/icon-profile.svg\\\"); }\\n\\n.m-employees-list .m-employees-list__item .controls .mail {\\n      background-image: url(\\\"/assets/icons/icon-letter-black.svg\\\"); }\\n\\n.m-employees-list .m-employees-list__item .controls .structure {\\n      background-image: url(\\\"/assets/icons/icon-struct-black.svg\\\"); }\\n\"","import { Component, OnInit, Inject } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport * as moment from 'moment';\nimport * as _ from 'lodash';\n\nimport { IListItemsPage } from 'src/app/services/list-items-service';\nimport { Employee } from 'src/app/staff/services/employees/employee';\nimport { EmployeesFactory } from 'src/app/staff/services/employees/employees.factory';\n\nexport interface Birthday {\n  birthday: string;\n  birthmonth: string;\n  employees: Employee[];\n}\n\n@Component({\n  selector: 'app-new-employees-page',\n  templateUrl: './new-employees-page.component.html',\n  styleUrls: ['./new-employees-page.component.scss']\n})\nexport class NewEmployeesPageComponent implements OnInit {\n  private pages: IListItemsPage<Employee>[] = [];\n  private index = 0;\n  public employees: Employee[] = [];\n  public birthdays: Birthday[] = [];\n  public hasPrev = false;\n  public hasNext = false;\n  public month: number;\n  public quater: number;\n  public months: string[];\n\n  constructor(\n    private route: ActivatedRoute,\n    @Inject('EmployeesFactory') private employeesFactory: EmployeesFactory\n  ) {\n    this.quater = Math.floor((new Date().getMonth()) / 3);\n    this.month = new Date().getMonth() - this.quater * 3;\n    this.months = Array.apply(0, Array(3)).map((v, i: number) => moment().month(i + this.quater * 3).format('MMMM'));\n  }\n\n  ngOnInit() {\n    this.pages.push(this.route.snapshot.data.newEmployees);\n    this.employees = this.route.snapshot.data.newEmployees.items;\n    this.birthdays = this.getBirthdaysForEmployees(this.employees);\n    this.hasNext = this.route.snapshot.data.newEmployees.hasNext;\n  }\n\n  private getMonthFirstDay(m: number) {\n    return moment(new Date((new Date()).getFullYear(), m, 1));\n  }\n\n  private getMonthLastDay(m: number) {\n    return moment(new Date((new Date()).getFullYear(), m, 1)).endOf('month');\n  }\n\n  public getBirthdaysPagetByMonth(month?: number) {\n    this.month = month == null ? this.month : month ;\n    this.index = 0;\n    this.employees = [];\n    this.pages = [];\n    this.birthdays = [];\n    this.hasPrev = false;\n    this.hasNext = false;\n    const first = this.getMonthFirstDay(this.month + this.quater * 3).toISOString();\n    const last = this.getMonthLastDay(this.month + this.quater * 3).toISOString();\n    this.employeesFactory.search().subscribe((page: IListItemsPage<Employee>) => {\n      this.employees = page.items;\n      this.birthdays = this.getBirthdaysForEmployees(this.employees);\n      this.hasNext = page.hasNext;\n      this.pages.push(page);\n    });\n    // this.employeesService.getItemsPaged({\n    //     filter: `(slStartWorkDate ge datetime'${first}') and (slStartWorkDate le datetime'${last}')`,\n    //     orderBy: [['slStartWorkDate', false]]\n    //   }).subscribe((page: IListItemsPage<Employee>) => {\n    //     this.employees = page.items;\n    //     this.birthdays = this.getBirthdaysForEmployees(this.employees);\n    //     this.hasNext = page.hasNext;\n    //     this.pages.push(page);\n    //   });\n  }\n\n  public getNext(): void {\n    if (this.hasNext) {\n      if (this.index === (this.pages.length - 1)) {\n        this.pages[this.index].getNext()\n          .subscribe((page: IListItemsPage<Employee>) => {\n            this.index++;\n            this.employees = page.items;\n            this.birthdays = this.getBirthdaysForEmployees(page.items);\n            this.hasNext = page.hasNext;\n            this.hasPrev = true;\n            this.pages.push(page);\n          });\n      } else {\n        this.index++;\n        this.employees = this.pages[this.index].items;\n        this.birthdays = this.getBirthdaysForEmployees(this.employees);\n        this.hasNext = this.pages[this.index].hasNext;\n        this.hasPrev = true;\n      }\n    }\n  }\n\n  public getPrev(): void {\n    if (this.hasPrev) {\n      this.index--;\n      this.employees = this.pages[this.index].items;\n      this.birthdays = this.getBirthdaysForEmployees(this.employees);\n      this.hasNext = true;\n      this.hasPrev = this.index > 0;\n    }\n  }\n\n  private getBirthdaysForEmployees(employees: Employee[]): Birthday[] {\n    const birthdays: Birthday[] = [];\n    const grouped = _.groupBy(employees, (employee: Employee) => employee.startdayTitleRelative);\n    for (const group in grouped) {\n      if (grouped.hasOwnProperty(group)) {\n        const dates: string[] = group.split(' ');\n        if (dates.length === 2) {\n          birthdays.push({ birthday: dates[0], birthmonth: dates[1], employees: grouped[group] });\n        }\n      }\n    }\n    return birthdays;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NewEmployeesPageComponent } from './components/new-employees-page/new-employees-page.component';\nimport { NewEmployeesPageResolver } from './services/employees/new-employees-page.resolver';\n// import { MsalGuard } from '@azure/msal-angular';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewEmployeesPageComponent,\n    resolve: { newEmployees: NewEmployeesPageResolver },\n    // canActivate : [MsalGuard],\n    data: { animation: 'fadeAnimation', title: 'Новые сотрудники' }\n  }\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    providers: [NewEmployeesPageResolver],\n    exports: [RouterModule]\n})\nexport class NewEmployeesRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NewEmployeesPageComponent } from './components/new-employees-page/new-employees-page.component';\nimport { NewEmployeesRoutingModule } from './new-employees-routing.module';\nimport { SharedModule } from '../shared/shared.module';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { StaffModule } from '../staff/staff.module';\n\n@NgModule({\n  declarations: [\n    NewEmployeesPageComponent\n  ],\n  imports: [\n    CommonModule,\n    NewEmployeesRoutingModule,\n    SharedModule,\n    FormsModule,\n    RouterModule,\n    StaffModule\n  ]\n})\nexport class NewEmployeesModule { }\n","import { Injectable, Inject } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\nimport { Observable } from 'rxjs';\nimport { IListItemsPage } from 'src/app/services/list-items-service';\nimport { Employee } from 'src/app/staff/services/employees/employee';\nimport { EmployeesFactory } from 'src/app/staff/services/employees/employees.factory';\n\n@Injectable()\nexport class NewEmployeesPageResolver implements Resolve<IListItemsPage<Employee>> {\n  constructor(@Inject('EmployeesFactory') private employeesFactory: EmployeesFactory) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<IListItemsPage<Employee>> {\n    return this.employeesFactory.search();\n  }\n}\n"],"sourceRoot":""}